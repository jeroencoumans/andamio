window.Andamio={},Andamio.dom=function(){return{win:$(window),doc:$(window.document),html:$("html"),viewport:$(".viewport"),pageView:$(".js-page-view"),parentView:$(".js-parent-view"),childView:$(".js-child-view"),childViewAlt:$(".js-child-view-alternate"),modalView:$(".js-modal-view")}}(),Andamio.i18n={ajaxGeneralError:"Computer said no:",ajaxNotFound:"The page couldn't be found.",ajaxTimeout:"The server timed out waiting for the request.",ajaxServerError:"The server is having problems, try again later.",ajaxRetry:"Please go back or try again.",offlineMessage:"There was a problem. Is your connection working? <br>Please check and try again.",pagerLoadMore:"Load more",pagerLoading:"Loading&hellip;",pagerNoMorePages:"There are no more items.",relativeDates:{ago:"ago",from:"",now:"Just now",minute:"Minute",minutes:"Minutes",hour:"Hour",hours:"Hours",day:"Day",days:"Days",week:"Week",weeks:"Weeks",month:"Month",months:"Months",year:"Year",years:"Years"}},Andamio.config=function(){var i=function(i){var e=this.os={},t=this.browser={},n=i.match(/WebKit\/([\d.]+)/),o=i.match(/(Android)\s+([\d.]+)/),a=i.match(/(iPad).*OS\s([\d_]+)/),s=!a&&i.match(/(iPhone\sOS)\s([\d_]+)/),r=i.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),d=r&&i.match(/TouchPad/),c=i.match(/Kindle\/([\d.]+)/),l=i.match(/Silk\/([\d._]+)/),h=i.match(/(BlackBerry).*Version\/([\d.]+)/),m=i.match(/(BB10).*Version\/([\d.]+)/),u=i.match(/(RIM\sTablet\sOS)\s([\d.]+)/),f=i.match(/PlayBook/),p=i.match(/Chrome\/([\d.]+)/)||i.match(/CriOS\/([\d.]+)/),g=i.match(/Firefox\/([\d.]+)/);(t.webkit=!!n)&&(t.version=n[1]),o&&(e.android=!0,e.version=o[2]),s&&(e.ios=e.iphone=!0,e.version=s[2].replace(/_/g,".")),a&&(e.ios=e.ipad=!0,e.version=a[2].replace(/_/g,".")),r&&(e.webos=!0,e.version=r[2]),d&&(e.touchpad=!0),h&&(e.blackberry=!0,e.version=h[2]),m&&(e.bb10=!0,e.version=m[2]),u&&(e.rimtabletos=!0,e.version=u[2]),f&&(t.playbook=!0),c&&(e.kindle=!0,e.version=c[1]),l&&(t.silk=!0,t.version=l[1]),!l&&e.android&&i.match(/Kindle Fire/)&&(t.silk=!0),p&&(t.chrome=!0,t.version=p[1]),g&&(t.firefox=!0,t.version=g[1]),e.tablet=!!(a||f||o&&!i.match(/Mobile/)||g&&i.match(/Tablet/)),e.phone=!(e.tablet||!(o||s||r||h||m||p&&i.match(/Android/)||p&&i.match(/CriOS\/([\d.]+)/)||g&&i.match(/Mobile/)))};return{get webapp(){return Andamio.dom.html.hasClass("webapp")},set webapp(i){i?Andamio.dom.html.removeClass("website").addClass("webapp"):Andamio.dom.html.removeClass("webapp").addClass("website")},init:function(e){i.call(this,navigator.userAgent),this.os.ios&&(this.os.ios5=-1!==this.os.version.indexOf("5."),this.os.ios6=-1!==this.os.version.indexOf("6.")),this.os.android&&(this.os.android2=this.os.version>="2"&&"4">this.os.version,this.os.android4=this.os.version>="4"&&"5">this.os.version);var t=window;if(this.webapp=t.location.search.search("webapp")>0||t.navigator.standalone,this.website=!this.webapp,this.cordova=t.navigator.userAgent.indexOf("TMGContainer")>-1,this.server=t.location.origin+t.location.pathname,this.touch="ontouchstart"in t,this.cache=window.lscache?window.lscache.supported():!1,Andamio.dom.doc.width()>=980&&(this.os.tablet=!0),this.cache&&(this.cacheExpiration=120),this.touch?this.fastclick=new FastClick(t.document.body):Andamio.dom.html.addClass("no-touch"),"object"==typeof e)for(var n in e)switch(n){case"init":break;case"i18n":for(var o in e.i18n)Andamio.i18n[o]=e.i18n[o];break;default:this[n]=e[n]}this.cordova&&(this.webapp=!0),this.os.tablet&&(Andamio.dom.html.addClass("tablet"),Andamio.nav.show(),this.webapp=!0);for(var a in this.os)Andamio.config.os[a]&&"version"!==a&&Andamio.dom.html.addClass(a)}}}(),Andamio.events=function(){var i,e=!1;return{get status(){return e},lock:function(t){e||(e=!0,t="number"==typeof t&&t>0?t:300,i=setTimeout(function(){e=!1},t))},unlock:function(){clearTimeout(i),e=!1},attach:function(i,t,n){Andamio.dom.viewport.on("click",i,function(i){return e||(n&&Andamio.events.lock(),t(i)),!1})}}}(),Andamio.util=function(){return{getUrl:function(i){var e=$(i).data("url"),t=$(i).attr("href"),n=$(i).hash;return e?encodeURI(e):"javascript"!==t.substring(0,10)?encodeURI(t):n?encodeURIComponent(n):void 0},getUrlList:function(i){if(i){var e=[];return $(i).each(function(i,t){var n=Andamio.util.getUrl(t);n&&e.push(n)}),e}},getTitle:function(i){var e=$(i).data("title"),t=$(i).text();return e?e:t},relativeDate:function(i){return i instanceof Date?humaneDate(i,!1,{lang:Andamio.i18n.relativeDates}):void 0}}}(),Andamio.util.delay=function(){var i=0;return function(e,t){clearTimeout(i),i=setTimeout(e,t)}}(),Andamio.phone=function(){return{init:function(){Andamio.config.phone={updateTimestamp:new Date,updateTimeout:18e5},navigator.bootstrap.addConstructor(function(){cordova.exec(null,null,"SplashScreen","hide",[]),Andamio.events.attach('a[target="_blank"]',function(i){var e=$(i.currentTarget),t=e.attr("href");return navigator.utility.openUrl(t,"popover"),!1}),Andamio.dom.doc.on("statusbartap",function(){var i=Andamio.nav.status?Andamio.dom.pageNav:Andamio.views.currentView.scroller;$.scrollTo?i.scrollTo(0,400):$.scrollElement&&$.scrollElement(i[0],0)}),Andamio.dom.doc.on("resign",function(){Andamio.config.phone.updateTimestamp=new Date}),Andamio.dom.doc.on("active",function(){var i=new Date;i-Andamio.config.phone.updateTimestamp>Andamio.config.phone.updateTimeout&&(Andamio.alert.status&&Andamio.alert.hide(),"parentView"===Andamio.views.currentView&&Andamio.views.refreshView())}),Andamio.config.os.android&&navigator.bootstrap.addConstructor(function(){Andamio.dom.doc.addEventListener("backbutton",function(){Andamio.views.popChild()})})})}}}(),Andamio.cache=function(){var i;return{get:function(e){if(e&&i){var t=i.get(e);if(t)return t}},set:function(e,t,n){if(e&&t&&i){var o="number"==typeof n?n:Andamio.config.cacheExpiration;i.set(e,t,o)}},"delete":function(e){e&&i&&i.remove(e)},init:function(){Andamio.config.cache?(i=window.lscache,Andamio.config.cacheExpiration=120):i=!1}}}(),Andamio.connection=function(){var i;return{goOnline:function(){i=!0,Andamio.alert.hide()},goOffline:function(){if(i){i=!1;var e=$('<a href="javascript:void(0)" class="action-refresh">'+Andamio.i18n.offlineMessage+"</a>");Andamio.alert.show(e)}},get status(){return i},init:function(){i=navigator.onLine}}}(),Andamio.page=function(){function i(i,e,t,n){$.ajax({url:i,timeout:0,cache:t,headers:{"X-PJAX":!0,"X-Requested-With":"XMLHttpRequest"},error:function(i,e){var t=i.status,n='<a href="javascript:void(0)" class="action-refresh">'+Andamio.i18n.ajaxGeneralError+"<br>"+e+" "+t+"<br>"+Andamio.i18n.ajaxRetry+"</a>";"timeout"===e?Andamio.connection.goOffline():Andamio.connection.status&&Andamio.alert.show(n)},success:function(t){Andamio.connection.goOnline(),Andamio.cache.set(i,t,e),n(t)}})}return{load:function(e,t,n,o){if(e){var a=Andamio.cache.get(e);a?$.isFunction(o)&&o(a):i(e,t,n,function(i){$.isFunction(o)&&o(i)})}},refresh:function(i,e,t){Andamio.cache.delete(i),this.load(i,e,!1,t)}}}(),Andamio.pager=function(){function i(i){a=!0,h=Andamio.views.currentView.scroller,m=h.height(),u=h[0].scrollHeight||Andamio.dom.viewport.height(),d.on("click",i.loadNextPage).insertAfter(Andamio.dom.pagerWrapper),c.insertAfter(Andamio.dom.pagerWrapper).hide(),Andamio.config.pager.autoFetch&&(i.autoFetching=!0)}function e(i){a=!1,Andamio.config.pager.autoFetch&&(i.autoFetching=!1),d.off("click",i.loadNextPage).remove(),c.remove(),l.insertAfter(Andamio.dom.pagerWrapper)}function t(){c.show(),d.hide()}function n(){c.hide(),d.show()}function o(e){this.params=$.isPlainObject(e)?e:{},Andamio.dom.pagerWrapper=this.params.pagerWrapper||Andamio.views.currentView.content.find(".js-pager-list"),d=$('<div class="pager-action"><a href="javascript:void(0)" class="button button-block action-load-more">'+(this.params.loadMoreAction||Andamio.i18n.pagerLoadMore)+"</a></div>"),c=$('<div class="pager-loading">'+(this.params.spinner||Andamio.i18n.pagerLoading)+"</div></div>"),l=$('<div class="pager-action">'+(this.params.noMorePages||Andamio.i18n.pagerNoMorePages)+"</div>"),Andamio.config.pager={autoFetch:this.params.autoFetch||!1,autoFetchMax:this.params.autoFetchMax||3,autoFetchThreshold:this.params.autoFetchThreshold||100,callback:$.isFunction(this.params.callback)?this.params.callback:function(){},expires:this.params.expires||null,itemsPerPage:this.params.itemsPerPage||10,loadMoreAction:d,noMorePages:l,spinner:c,url:this.params.url||Andamio.config.server+"?page="},this.pageNumber=this.params.pageNumber||0,Object.defineProperties(this,{autoFetching:{get:function(){return s},set:function(i){s=i;var e=this;i?(c.show(),d.hide(),h.on("scroll",function(){e.onScroll()})):(h.off("scroll"),c.hide(),d.show())}},status:{get:function(){return a}}}),Andamio.dom.pagerWrapper.length>0&&Andamio.config.pager.itemsPerPage<=Andamio.dom.pagerWrapper[0].children.length&&i(this)}var a,s,r,d,c,l,h,m,u;return o.prototype.loadNextPage=function(i){if(!r){r=!0,this.pageNumber++;var o,a=this;a.autoFetching||t(),Andamio.page.load(Andamio.config.pager.url+a.pageNumber,Andamio.config.pager.expires,!0,function(t){r=!1,o=!1,t&&($.isPlainObject(t)?$.isEmptyObject(t.content)||(o=t.content):o=t),o?(Andamio.dom.pagerWrapper.append(o),a.autoFetching||n(),m=h.height(),u=h[0].scrollHeight||Andamio.dom.viewport.height(),$.isFunction(i)&&i(a.pageNumber),Andamio.config.pager.callback(a.pageNumber)):e(a)})}},o.prototype.onScroll=function(){if(!r){var i=h.scrollTop(),e=this;Andamio.util.delay(function(){i+m+Andamio.config.pager.autoFetchThreshold>=u&&e.loadNextPage(function(){h.scrollTop(i),e.pageNumber>=Andamio.config.pager.autoFetchMax&&(e.autoFetching=!1)})},300)}},o.prototype.disable=function(){e(this)},{init:function(i){return new o(i)}}}(),Andamio.dom.pageAlert=$(".js-page-alert"),Object.defineProperties(Andamio.dom,{pageAlertText:{get:function(){return this.pageAlert.find(".js-page-alert-text").text()},set:function(i){this.pageAlert.find(".js-page-alert-text").html(i)}}}),Andamio.alert=function(){var i;return{show:function(e){e&&(Andamio.dom.pageAlertText=e),i=!0,Andamio.dom.html.addClass("has-alert"),Andamio.dom.pageAlert.show()},hide:function(){i=!1,Andamio.dom.html.removeClass("has-alert"),Andamio.dom.pageAlert.hide()},get status(){return i},init:function(){i=Andamio.dom.html.hasClass("has-alert"),Andamio.events.attach(".action-hide-alert",this.hide),Andamio.dom.doc.on("Andamio:views:activateView",this.hide)}}}(),Andamio.dom.pageLoader=$(".js-page-loader"),Andamio.dom.pageLoaderImg=Andamio.dom.pageLoader.find(".js-page-loader-spinner"),Object.defineProperties(Andamio.dom,{pageLoaderText:{get:function(){return this.pageLoader.find(".js-page-loader-text").text()},set:function(i){this.pageLoader.find(".js-page-loader-text").html(i)}}}),Andamio.loader=function(){var i;return{show:function(e){i=!0,e&&(Andamio.dom.pageLoaderText=e),Andamio.dom.html.addClass("has-loader"),Andamio.config.cordova?navigator.spinner&&navigator.spinner.show({message:e}):Andamio.dom.pageLoader.show()},hide:function(){i=!1,Andamio.dom.html.removeClass("has-loader"),Andamio.config.cordova?navigator.spinner&&navigator.spinner.hide():Andamio.dom.pageLoader.hide()},get status(){return i},init:function(){i=Andamio.dom.html.hasClass("has-loader");var e,t=this;Andamio.dom.doc.on("Andamio:views:activateView:start",function(){e=setTimeout(function(){t.show()},250)}),Andamio.dom.doc.on("Andamio:views:activateView:finish",function(){clearTimeout(e),t.hide()}),Andamio.dom.doc.on("ajaxError",function(){clearTimeout(e),t.hide()})}}}(),Andamio.dom.pageNav=$(".js-page-navigation"),Andamio.dom.pageNavItems=Andamio.dom.pageNav.find(".action-nav-item"),Object.defineProperties(Andamio.dom,{pageNavActive:{get:function(){return this.pageNavItems.filter(".active")},set:function(i){$.contains(this.pageNav[0],i[0])&&(this.pageNavActive.removeClass("active"),i.addClass("active"))}}}),Andamio.nav=function(){function i(i){Andamio.dom.viewport.height(i),Andamio.dom.pageView.height(i)}var e,t,n;return{show:function(){e=!0,Andamio.events.lock(),Andamio.dom.html.addClass("has-navigation"),Andamio.config.webapp||i(n)},hide:function(){e=!1,Andamio.events.lock(),Andamio.dom.html.removeClass("has-navigation"),Andamio.config.webapp||i("")},get status(){return e},init:function(){var i=this;e=Andamio.dom.html.hasClass("has-navigation"),Andamio.config.webapp||(t=Andamio.dom.win.height(),n=Andamio.dom.pageNav.height(),Andamio.config.os.iphone&&(t+=60),t>n&&(n=t,Andamio.dom.pageNav.height(n))),Andamio.events.attach(".action-show-nav",i.show),Andamio.events.attach(".action-hide-nav",i.hide),Andamio.dom.doc.on("touchmove",".action-hide-nav",function(i){i.preventDefault()}),Andamio.events.attach(".action-nav-item",function(e){var t=$(e.currentTarget),n=Andamio.util.getUrl(t),o=Andamio.util.getTitle(t);return Andamio.dom.pageNavActive[0]!==t[0]||Andamio.config.os.tablet?(Andamio.dom.pageNavActive=t,Andamio.config.os.tablet||i.hide(),o&&Andamio.dom.doc.one("Andamio:views:activateView:finish",function(){Andamio.views.parentView.title=o}),n&&Andamio.views.openParentPage(n),void 0):(i.hide(),void 0)})}}}(),Andamio.pulltorefresh=function(){function i(i){s=i,i?m.scroller.addClass("is-refreshing").removeClass("can-refresh"):m.scroller.removeClass("is-refreshing")}function e(i){d=i instanceof Date?i:d,c=new Date,c-d>1e3&&l.text(Andamio.util.relativeDate(d))}function t(){clearInterval(h),h=!1}function n(){r=m.scroller.scrollTop(),r>=0?t():m.threshold>r?m.scroller.addClass("can-refresh"):m.scroller.removeClass("can-refresh")}function o(){s||h||(h=setInterval(n,100))}function a(){t(),e(),s||(r=m.scroller.scrollTop(),m.threshold>r&&(i(!0),Andamio.views.refreshView(null,function(){i(!1),m.callback()})))}var s,r,d,c,l,h,m;return{get callback(){return m.callback},get status(){return m.scroller?m.scroller.hasClass("has-pull-to-refresh"):!1},get updateTimestamp(){return d},init:function(i){s=!1,m={scroller:Andamio.views.parentView.scroller,callback:function(){},threshold:-50},$.extend(m,i),m.scroller.hasClass("has-pull-to-refresh")||(m.scroller.addClass("has-pull-to-refresh").on("touchmove",o).on("touchend",a),l=$(".js-pull-to-refresh-timestamp"),d=new Date,l.text(Andamio.util.relativeDate(d)),Andamio.dom.doc.on("Andamio:views:activateView:finish",function(i,t){"parentView"===t&&e(new Date)}))}}}(),Andamio.reveal=function(){return{init:function(){Andamio.events.attach(".action-reveal",function(i){var e,t,n,o="active",a="."+o,s=$(i.currentTarget);s&&(e=s.siblings(a),e&&e.removeClass(o),s.addClass(o),n=Andamio.util.getUrl(s),n&&(t=$(n).siblings(a),t&&t.removeClass("active"),$(n).addClass(o),i.preventDefault()))})}}}(),Andamio.social=function(){function i(i){var e=480,t=320,n=window.screen.availWidth/2-e/2,o=window.screen.availHeight/2-t/2;window.open(i,"Share it","left="+n+", top="+o+", width="+e+", height="+t+", centerscreen=yes")}function e(e,t,n,o,a,s){Andamio.config.cordova?navigator.social.shareUrl(e,t,n,o,a,function(i){navigator.social.RESULT_OK===i?$.isFunction(s)&&s():navigator.social.RESULT_ERROR===i&&navigator.utility.openUrl(t,"popover")}):(i(t),$.isFunction(s)&&s())}function t(){var i=Andamio.views.currentView.content.find(r),e=i[0].src,t=i[0].style.backgroundImage.slice(4,-1);return e||t}function n(){return $.trim(Andamio.views.currentView.content.find(a).text())}function o(){return $.trim(Andamio.views.currentView.content.find(s).text())}var a,s,r,d,c,l,h,m;return{share:function(i,a){switch(c=0===Andamio.views.currentUrl.search(Andamio.config.server)?Andamio.views.currentUrl:Andamio.config.server+Andamio.views.currentUrl,l=n(),h=o(),i){case"hyves":d=encodeURI("http://www.hyves.nl/respect/confirm/?hc_hint=1&url="+c),e("hyves",d,c,"","",a);break;case"facebook":var s=Andamio.config.touch?"touch":"popup";d=encodeURI("https://www.facebook.com/dialog/feed?app_id="+Andamio.config.social.facebook+"&link="+c+"&picture="+t()+"&name="+l+"&caption="+c+"&description="+h+"&redirect_uri="+c+"&display="+s),e("facebook",d,c,"",l,a);break;case"twitter":h=n()+" %url - via @"+Andamio.config.twitterAccount,d=encodeURI("https://twitter.com/intent/tweet?text="+l+"&url="+c+"&via="+Andamio.config.social.twitter),e("twitter",d,c,"",h,a);break;case"email":h+="\n\n"+c,d=encodeURI("mailto:?subject="+l+"&body="+h),e("email",d,c,l,h,a);break;case"linkedin":d=encodeURI("http://www.linkedin.com/shareArticle?mini=true&url="+c+"&title="+l+"&summary="+h+"&source="+Andamio.config.title),e("linkedin",d,c,"",h,a)}},init:function(i){function e(i,e,n){var o=$(i.currentTarget);o.hasClass("button-disabled")||t.share(e,function(){o.addClass("button-disabled"),n()})}a=".js-sharing-title",s=".js-sharing-description",r=".js-sharing-thumbnail",m=function(){},$.isPlainObject(i)&&("string"==typeof i.title&&(a=i.title),"string"==typeof i.description&&(s=i.description),"string"==typeof i.thumbnail&&(r=i.thumbnail),m=i.callback);var t=this;Andamio.events.attach(".action-share-facebook",function(i){e(i,"facebook",m)}),Andamio.events.attach(".action-share-twitter",function(i){e(i,"twitter",m)}),Andamio.events.attach(".action-share-hyves",function(i){e(i,"hyves",m)}),Andamio.events.attach(".action-share-email",function(i){e(i,"email",m)}),Andamio.events.attach(".action-share-linkedin",function(i){e(i,"linkedin",m)})}}}(),Andamio.slideshow=function(){function i(i){if("number"==typeof i){this.wrapper=$('<div class="slideshow-dots">');for(var e=0;i>e;e++)this.wrapper.append($('<div class="slideshow-dot"></div>'));this.items=this.wrapper.find(".slideshow-dot"),Object.defineProperties(this,{active:{get:function(){return this.wrapper.find(".active")},set:function(i){this.wrapper.find(".active").removeClass("active"),$(i).addClass("active")}}}),this.active=this.items.first()}}var e,t,n;return{destroy:function(){n.wrapper.off("click"),t.off("click"),e.kill(),t=null,e=null,n=null},init:function(o,a,s){if(t=$("#"+o),!t.hasClass(".js-slideshow-active")){var r={startSlide:0,speed:300,continuous:!0,disableScroll:!1};return this.options=$.extend({},r,a),e=this.slideshow=new Swipe(document.getElementById(o),this.options),n=this.dots=new i(e.length),n.wrapper.insertAfter(e.container).on("click",function(i){var t=i.target;n.items.each(function(i,n){n===t&&e.slide(i,300)})}),e.callback=function(i,e){n.active=n.items[i],$.isFunction(s)&&s(i,e)},t.find(".js-slideshow-media").each(function(i,e){var t=$(e),n=t.data("src");t.css("background-image","url("+n+")")}),t.on("click",function(i){var t=$(i.target),n=t.parents(".action-slideshow-next"),o=t.parents(".action-slideshow-prev");n.length&&e.next(),o.length&&e.prev()}),t.addClass("js-slideshow-active"),this}}}}(),Andamio.dom.pageTabs=$(".js-page-tabs"),Andamio.dom.pageTabsItems=Andamio.dom.pageTabs.find(".action-tab-item"),Object.defineProperties(Andamio.dom,{pageTabsActive:{get:function(){return this.pageTabsItems.filter(".active")},set:function(i){$.contains(this.pageTabs[0],i[0])&&(this.pageTabsActive.removeClass("active"),i.addClass("active"))}}}),Andamio.tabs=function(){var i;return{show:function(){i=!0,Andamio.dom.html.addClass("has-page-tabs"),Andamio.dom.pageTabs.show()},hide:function(){i=!1,Andamio.dom.html.removeClass("has-page-tabs"),Andamio.dom.pageTabs.hide()},get status(){return i},init:function(){i=Andamio.dom.html.hasClass("has-page-tabs"),Andamio.events.attach(".action-show-tabs",Andamio.tabs.show),Andamio.events.attach(".action-hide-tabs",Andamio.tabs.hide),Andamio.events.attach(".action-tab-item",function(i){var e=$(i.currentTarget),t=Andamio.util.getUrl(e),n=Andamio.util.getTitle(e);Andamio.dom.pageTabsActive[0]!==e[0]&&(Andamio.dom.pageTabsActive=e,n&&Andamio.dom.doc.one("Andamio:views:activateView:finish",function(){Andamio.views.parentView.title=n}),Andamio.views.openParentPage(t))})}}}(),Andamio.views=function(){function i(i){return i.length>0?i[i.length-1]:void 0}function e(i){return i&&i.length>1?i[i.length-2]:void 0}function t(e,t){e!==i(t)&&t.push(e)}function n(i,e,t){this.container=i,Object.defineProperties(this,{title:{configurable:!0,get:function(){return this.container.find(".js-title")},set:function(i){"string"==typeof i&&this.container.find(".js-title").text(i)}},content:{configurable:!0,get:function(){return this.container.hasClass("js-content")?this.container:this.container.find(".js-content")}},scroller:{configurable:!0,get:function(){return Andamio.config.webapp?this.container.hasClass("overthrow")?this.container:this.container.find(".overthrow"):Andamio.dom.win}},active:{get:function(){return this.container.hasClass("view-active")},set:function(i){i?this.container.addClass("view-active").removeClass("view-hidden"):this.container.addClass("view-hidden").removeClass("view-active")}}}),t&&(this.initialPosition=t,this.position=t,this.slide=function(i){var e=this.container,t=this.position;Andamio.events.lock(),"slide-left"===t&&"slide-default"===i&&e.addClass("slide-in-from-left").one("webkitTransitionEnd",function(){e.addClass("slide-default").removeClass("slide-left slide-right slide-in-from-left")}),"slide-right"===t&&"slide-default"===i&&e.addClass("slide-in-from-right").one("webkitTransitionEnd",function(){e.addClass("slide-default").removeClass("slide-right slide-left slide-in-from-right")}),"slide-bottom"===t&&"slide-default"===i&&e.addClass("slide-in-from-bottom").one("webkitTransitionEnd",function(){e.addClass("slide-default").removeClass("slide-bottom slide-in-from-bottom")}),"slide-top"===t&&"slide-default"===i&&e.addClass("slide-in-from-top").one("webkitTransitionEnd",function(){e.addClass("slide-default").removeClass("slide-top slide-in-from-top")}),"slide-default"===t&&"slide-left"===i&&e.addClass("slide-out-to-left").one("webkitTransitionEnd",function(){e.addClass("slide-left").removeClass("slide-default slide-out-to-left")}),"slide-default"===t&&"slide-right"===i&&e.addClass("slide-out-to-right").one("webkitTransitionEnd",function(){e.addClass("slide-right").removeClass("slide-default slide-out-to-right")}),"slide-default"===t&&"slide-bottom"===i&&e.addClass("slide-out-to-bottom").one("webkitTransitionEnd",function(){e.addClass("slide-bottom").removeClass("slide-default slide-out-to-bottom")}),"slide-default"===t&&"slide-top"===i&&e.addClass("slide-out-to-top").one("webkitTransitionEnd",function(){e.addClass("slide-top").removeClass("slide-default slide-out-to-top")}),this.position=i})}function o(){var o=new n(Andamio.dom.parentView,!0,"slide-default"),a=new n(Andamio.dom.childView,!0,"slide-right"),s=new n(Andamio.dom.childViewAlt,!0,"slide-right"),r=new n(Andamio.dom.modalView,!0,"slide-bottom"),d=[],c=[],l=[];this.parentView=o,this.childView=a,this.childViewAlt=s,this.modalView=r,this.childCount=0,this.modalCount=0,Object.defineProperties(this,{currentUrl:{get:function(){return i(d)},set:function(i){t(i,d)}},previousUrl:{get:function(){return e(d)}},currentView:{get:function(){return i(c)},set:function(i){c.push(i)}},previousView:{get:function(){return e(c)}},scrollPosition:{get:function(){return i(l)},set:function(i){l.push(i)}},urlHistory:{get:function(){return d}},viewHistory:{get:function(){return c}},scrollHistory:{get:function(){return l}}}),this.resetViews=function(){this.parentView.reset(),this.childView.reset(),this.childViewAlt.reset(),this.modalView.reset(),c=[],d=[],l=[],this.childCount=0,this.modalCount=0},this.activateView=function(i,e,t,n){i.active=!0,Andamio.dom.doc.trigger("Andamio:views:activateView"),e&&(Andamio.dom.doc.trigger("Andamio:views:activateView:start",[i,e]),i.content.empty(),Andamio.page.load(e,t,!0,function(t){i.content.html(t),"number"==typeof n&&(i.scroller[0].scrollTop=n),Andamio.dom.doc.trigger("Andamio:views:activateView:finish",[i,e])}))},this.deactivateView=function(i){i.active=!1},this.pushView=function(i,e,t,n){this.currentView=i,e&&(this.currentUrl=e),this.previousView&&(this.scrollPosition=this.previousView.scroller[0].scrollTop,this.deactivateView(this.previousView)),this.activateView(i,e,t,n)},this.popView=function(){this.previousView&&(this.deactivateView(this.currentView),1===this.childCount?this.activateView(this.previousView):this.activateView(this.previousView,this.previousUrl,!1,this.scrollPosition),c.pop(),d.pop(),l.pop())},this.refreshView=function(i,e){var t=this.currentUrl,n=this.currentView,o=n.content;t&&(Andamio.dom.doc.trigger("Andamio:views:activateView:start",[n,t]),o.empty(),Andamio.page.refresh(t,i,function(i){o.html(i),Andamio.dom.doc.trigger("Andamio:views:activateView:finish",[n,t]),$.isFunction(e)&&e()}))},this.openParentPage=function(i,e){this.resetViews(),this.pushView(o,i,e,0)},this.pushModal=function(i,e){return this.modalCount>0?!1:(Andamio.config.webapp&&r.slide("slide-default"),this.pushView(r,i,e),this.modalCount++,void 0)},this.popModal=function(){return this.modalCount>0?(Andamio.config.webapp&&r.slide("slide-bottom"),this.popView(),this.modalCount--,void 0):!1},this.pushChild=function(i,e){this.childCount++;var t=this.currentView;switch(t){case o:this.pushView(a,i,e,0),Andamio.config.webapp&&(o.slide("slide-left"),a.slide("slide-default"));break;case a:this.pushView(s,i,e,0),Andamio.config.webapp&&(s.container.removeClass("slide-left").addClass("slide-right"),Andamio.util.delay(function(){a.slide("slide-left"),s.slide("slide-default")},0));break;case s:this.pushView(a,i,e,0),Andamio.config.webapp&&(a.container.removeClass("slide-left").addClass("slide-right"),Andamio.util.delay(function(){s.slide("slide-left"),a.slide("slide-default")},0))}},this.popChild=function(){var i=this.currentView;if(Andamio.config.webapp)switch(i){case o:return;case a:1===this.childCount?(o.slide("slide-default"),a.slide("slide-right")):(s.container.removeClass("slide-right").addClass("slide-left"),Andamio.util.delay(function(){a.slide("slide-right"),s.slide("slide-default")},0));break;case s:a.container.removeClass("slide-right").addClass("slide-left"),Andamio.util.delay(function(){s.slide("slide-right"),a.slide("slide-default")},0)}this.popView(),this.childCount--},this.init=function(){var i,e,t=this;"string"==typeof Andamio.config.initialView?t.openParentPage(Andamio.config.initialView):(t.openParentPage(),t.currentUrl=Andamio.config.server),Andamio.events.attach(".action-push",function(n){i=$(n.currentTarget),e=Andamio.util.getUrl(i),t.pushChild(e)}),Andamio.events.attach(".action-show-modal",function(n){i=$(n.currentTarget),e=Andamio.util.getUrl(i),t.pushModal(e)}),Andamio.events.attach(".action-pop",function(){t.popChild()}),Andamio.events.attach(".action-hide-modal",function(){t.popModal()}),Andamio.events.attach(".action-refresh",function(){t.refreshView()})}}return n.prototype.reset=function(){this.position&&Andamio.config.webapp&&(this.position=this.initialPosition,this.container.removeClass("slide-left slide-right slide-default slide-bottom").addClass(this.position)),this.active=!1},new o}(),Andamio.init=function(i){Andamio.config.init(i),Andamio.alert.init(),Andamio.cache.init(),Andamio.connection.init(),Andamio.loader.init(),Andamio.views.init(),Andamio.nav.init(),Andamio.tabs.init(),Andamio.reveal.init(),Andamio.config.cordova&&Andamio.phone.init()};