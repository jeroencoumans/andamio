window.Andamio={},Andamio.dom=function(){return{win:$(window),doc:$(window.document),html:$("html"),viewport:$(".viewport"),pageView:$(".js-page-view"),parentView:$(".js-parent-view"),childView:$(".js-child-view"),childViewAlt:$(".js-child-view-alternate"),modalView:$(".js-modal-view")}}(),Andamio.i18n={ajaxGeneralError:"Computer said no:",ajaxNotFound:"The page couldn't be found.",ajaxTimeout:"The server timed out waiting for the request.",ajaxServerError:"The server is having problems, try again later.",ajaxRetry:"Please go back or try again.",offlineMessage:"There was a problem. Is your connection working? <br>Please check and try again.",pagerLoadMore:"Load more",pagerLoading:"Loading&hellip;",pagerNoMorePages:"There are no more items."},Andamio.config=function(){var i=function(i){var t=this.os={},e=this.browser={},o=i.match(/WebKit\/([\d.]+)/),n=i.match(/(Android)\s+([\d.]+)/),a=i.match(/(iPad).*OS\s([\d_]+)/),s=!a&&i.match(/(iPhone\sOS)\s([\d_]+)/),d=i.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),r=d&&i.match(/TouchPad/),c=i.match(/Kindle\/([\d.]+)/),l=i.match(/Silk\/([\d._]+)/),h=i.match(/(BlackBerry).*Version\/([\d.]+)/),m=i.match(/(BB10).*Version\/([\d.]+)/),u=i.match(/(RIM\sTablet\sOS)\s([\d.]+)/),p=i.match(/PlayBook/),f=i.match(/Chrome\/([\d.]+)/)||i.match(/CriOS\/([\d.]+)/),v=i.match(/Firefox\/([\d.]+)/);(e.webkit=!!o)&&(e.version=o[1]),n&&(t.android=!0,t.version=n[2]),s&&(t.ios=t.iphone=!0,t.version=s[2].replace(/_/g,".")),a&&(t.ios=t.ipad=!0,t.version=a[2].replace(/_/g,".")),d&&(t.webos=!0,t.version=d[2]),r&&(t.touchpad=!0),h&&(t.blackberry=!0,t.version=h[2]),m&&(t.bb10=!0,t.version=m[2]),u&&(t.rimtabletos=!0,t.version=u[2]),p&&(e.playbook=!0),c&&(t.kindle=!0,t.version=c[1]),l&&(e.silk=!0,e.version=l[1]),!l&&t.android&&i.match(/Kindle Fire/)&&(e.silk=!0),f&&(e.chrome=!0,e.version=f[1]),v&&(e.firefox=!0,e.version=v[1]),t.tablet=!!(a||p||n&&!i.match(/Mobile/)||v&&i.match(/Tablet/)),t.phone=!(t.tablet||!(n||s||d||h||m||f&&i.match(/Android/)||f&&i.match(/CriOS\/([\d.]+)/)||v&&i.match(/Mobile/)))};return{get webapp(){return Andamio.dom.html.hasClass("webapp")},set webapp(i){i?Andamio.dom.html.removeClass("website").addClass("webapp"):Andamio.dom.html.removeClass("webapp").addClass("website")},init:function(t){i.call(this,navigator.userAgent),this.os.ios&&(this.os.ios5=-1!==this.os.version.indexOf("5."),this.os.ios6=-1!==this.os.version.indexOf("6.")),this.os.android&&(this.os.android2=this.os.version>="2"&&"4">this.os.version,this.os.android4=this.os.version>="4"&&"5">this.os.version);var e=window;if(this.webapp=e.location.search.search("webapp")>0||e.navigator.standalone,this.website=!this.webapp,this.cordova=e.navigator.userAgent.indexOf("TMGContainer")>-1,this.server=e.location.origin+e.location.pathname,this.touch="ontouchstart"in e,this.cache=window.lscache?window.lscache.supported():!1,Andamio.dom.doc.width()>=980&&(this.os.tablet=!0),"object"==typeof t)for(var o in t)switch(o){case"init":break;case"i18n":for(var n in t.i18n)Andamio.i18n[n]=t.i18n[n];break;default:this[o]=t[o]}this.cache&&(this.cacheExpiration=120),this.touch?this.fastclick=new FastClick(e.document.body):Andamio.dom.html.addClass("no-touch"),this.cordova&&(this.webapp=!0),this.os.tablet&&(Andamio.dom.html.addClass("tablet"),Andamio.nav.show(),this.webapp=!0);for(var a in this.os)Andamio.config.os[a]&&"version"!==a&&Andamio.dom.html.addClass(a)}}}(),Andamio.events=function(){var i,t=!1;return{get status(){return t},lock:function(e){t||(t=!0,e="number"==typeof e&&e>0?e:300,i=setTimeout(function(){t=!1},e))},unlock:function(){clearTimeout(i),t=!1},attach:function(i,e,o){Andamio.dom.viewport.on("click",i,function(i){return t||(o&&Andamio.events.lock(),e(i)),!1})}}}(),Andamio.util=function(){function i(i,t){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function t(i){this.values=i||{}}return t.prototype.store=function(i,t){this.values[i]=t},t.prototype.lookup=function(i){return this.values[i]},t.prototype.contains=function(i){return Object.prototype.hasOwnProperty.call(this.values,i)&&Object.prototype.propertyIsEnumerable.call(this.values,i)},t.prototype.each=function(t){i(this.values,t)},{Dictionary:t,getUrl:function(i){var t=$(i).data("url"),e=$(i).attr("href"),o=$(i).hash;return t?t:"javascript"!==e.substring(0,10)?e:o?o:void 0},getUrlList:function(i){if(i){var t=[];return $(i).each(function(i,e){var o=Andamio.util.getUrl(e);o&&t.push(o)}),t}},getTitle:function(i){var t=$(i).data("title"),e=$(i).text();return t?t:e}}}(),Andamio.util.delay=function(){var i=0;return function(t,e){clearTimeout(i),i=setTimeout(t,e)}}(),Andamio.phone=function(){return{init:function(){Andamio.config.phone={updateTimestamp:new Date,updateTimeout:18e5},navigator.bootstrap.addConstructor(function(){cordova.exec(null,null,"SplashScreen","hide",[]),Andamio.events.attach('a[target="_blank"]',function(i){var t=$(i.currentTarget),e=t.attr("href");return navigator.utility.openUrl(e,"popover"),!1}),Andamio.dom.doc.on("statusbartap",function(){var i=Andamio.views.list.lookup(Andamio.views.currentView),t=Andamio.nav.status?Andamio.dom.pageNav:i.scroller;$.scrollTo?t.scrollTo(0,400):$.scrollElement&&$.scrollElement(t[0],0)}),Andamio.dom.doc.on("resign",function(){Andamio.config.phone.updateTimestamp=new Date}),Andamio.dom.doc.on("active",function(){var i=new Date;i-Andamio.config.updateTimestamp>Andamio.config.updateTimeout&&(Andamio.alert.status&&Andamio.alert.hide(),Andamio.views.refreshView())}),Andamio.config.os.android&&navigator.bootstrap.addConstructor(function(){Andamio.dom.doc.addEventListener("backbutton",function(){Andamio.views.popChild()})})})}}}(),Andamio.cache=function(){var i;return{get:function(t){if(t&&i){var e=i.get(t);if(e)return e}},set:function(t,e,o){if(t&&e&&i){var n="number"==typeof o?o:Andamio.config.cacheExpiration;i.set(t,e,n)}},"delete":function(t){t&&i&&i.remove(t)},init:function(){Andamio.config.cache?(i=window.lscache,Andamio.config.cacheExpiration=120):i=!1}}}(),Andamio.connection=function(){var i;return{goOnline:function(){i=!0,Andamio.alert.hide()},goOffline:function(){if(i){i=!1;var t=$('<a href="javascript:void(0)" class="action-refresh">'+Andamio.i18n.offlineMessage+"</a>");Andamio.alert.show(t)}},get status(){return i},init:function(){i=navigator.onLine}}}(),Andamio.page=function(){function i(i,t,e){var o=i+(/\?/.test(i)?"&":"?")+(new Date).getTime();$.ajax({url:o,timeout:0,headers:{"X-PJAX":!0,"X-Requested-With":"XMLHttpRequest"},error:function(i,t){var e=i.status,o='<a href="javascript:void(0)" class="action-refresh">'+Andamio.i18n.ajaxGeneralError+"<br>"+t+" "+e+"<br>"+Andamio.i18n.ajaxRetry+"</a>";"timeout"===t?Andamio.connection.goOffline():Andamio.connection.status&&Andamio.alert.show(o)},success:function(o){Andamio.connection.goOnline(),Andamio.cache.set(i,o,t),e(o)}})}return{load:function(t,e,o){if(t&&$.isFunction(o)){var n=Andamio.cache.get(t);n?o(n):i(t,e,function(i){o(i)})}},refresh:function(i,t,e){Andamio.cache.delete(i),this.load(i,t,e)}}}(),Andamio.pager=function(){function i(i){a=!0,h=Andamio.views.list.lookup(Andamio.views.currentView),m=h.scroller,u=m.height(),p=m[0].scrollHeight||Andamio.dom.viewport.height(),r.insertAfter(Andamio.dom.pagerWrapper),c.insertAfter(Andamio.dom.pagerWrapper).hide(),Andamio.config.pager.autoFetch&&(i.autoFetching=!0),r.on("click",function(){i.loadNextPage()})}function t(i){a=!1,Andamio.config.pager.autoFetch&&(i.autoFetching=!1),r.off("click",function(){i.loadNextPage()}),r.remove(),c.remove(),l.insertAfter(Andamio.dom.pagerWrapper)}function e(){c.show(),r.hide()}function o(){c.hide(),r.show()}function n(t){this.params=$.isPlainObject(t)?t:{},Andamio.dom.pagerWrapper=this.params.elem||Andamio.views.list.lookup(Andamio.views.currentView).content.find(".js-pager-list"),r=$('<div class="pager-action"><a href="javascript:void(0)" class="button button-block action-load-more">'+(this.params.loadMoreAction||Andamio.i18n.pagerLoadMore)+"</a></div>"),c=$('<div class="pager-loading">'+(this.params.spinner||Andamio.i18n.pagerLoading)+"</div></div>"),l=$('<div class="pager-action">'+(this.params.noMorePages||Andamio.i18n.pagerNoMorePages)+"</div>"),Andamio.config.pager={autoFetch:this.params.autoFetch||!1,autoFetchMax:this.params.autoFetchMax||3,autoFetchThreshold:this.params.autoFetchThreshold||100,callback:$.isFunction(this.params.callback)?this.params.callback:function(){},expires:this.params.expires||null,itemsPerPage:this.params.itemsPerPage||10,loadMoreAction:r,noMorePages:l,spinner:c,url:this.params.url||Andamio.config.server+"?page="},this.pageNumber=this.params.pageNumber||0,Object.defineProperties(this,{autoFetching:{get:function(){return s},set:function(i){s=i;var t=this;i?(c.show(),r.hide(),m.on("scroll",function(){t.onScroll()})):(m.off("scroll"),c.hide(),r.show())}},status:{get:function(){return a}}}),Andamio.dom.pagerWrapper.length>0&&Andamio.config.pager.itemsPerPage<=Andamio.dom.pagerWrapper[0].children.length&&i(this)}var a,s,d,r,c,l,h,m,u,p;return n.prototype.loadNextPage=function(i){if(!d){d=!0,this.pageNumber++;var n=this;n.autoFetching||e(),Andamio.page.load(Andamio.config.pager.url+n.pageNumber,Andamio.config.pager.expires,function(e){d=!1,e?(Andamio.dom.pagerWrapper.append(e),n.autoFetching||o(),u=m.height(),p=m[0].scrollHeight||Andamio.dom.viewport.height(),$.isFunction(i)&&i(n.pageNumber),Andamio.config.pager.callback(n.pageNumber)):t(n)})}},n.prototype.onScroll=function(){if(!d){var i=m.scrollTop(),t=this;Andamio.util.delay(function(){i+u+Andamio.config.pager.autoFetchThreshold>=p&&t.loadNextPage(function(){m.scrollTop(i),t.pageNumber>=Andamio.config.pager.autoFetchMax&&(t.autoFetching=!1)})},300)}},{init:function(i){return new n(i)}}}(),Andamio.dom.pageAlert=$(".js-page-alert"),Object.defineProperties(Andamio.dom,{pageAlertText:{get:function(){return this.pageAlert.find(".js-page-alert-text").text()},set:function(i){this.pageAlert.find(".js-page-alert-text").html(i)}}}),Andamio.alert=function(){var i;return{show:function(t){t&&(Andamio.dom.pageAlertText=t),i=!0,Andamio.dom.html.addClass("has-alert"),Andamio.dom.pageAlert.show()},hide:function(){i=!1,Andamio.dom.html.removeClass("has-alert"),Andamio.dom.pageAlert.hide()},get status(){return i},init:function(){i=Andamio.dom.html.hasClass("has-alert"),Andamio.events.attach(".action-hide-alert",this.hide),Andamio.dom.doc.on("Andamio:views:activateView",this.hide)}}}(),Andamio.dom.pageLoader=$(".js-page-loader"),Andamio.dom.pageLoaderImg=Andamio.dom.pageLoader.find(".js-page-loader-spinner"),Object.defineProperties(Andamio.dom,{pageLoaderText:{get:function(){return this.pageLoader.find(".js-page-loader-text").text()},set:function(i){this.pageLoader.find(".js-page-loader-text").html(i)}}}),Andamio.loader=function(){var i;return{show:function(t){i=!0,t&&(Andamio.dom.pageLoaderText=t),Andamio.dom.html.addClass("has-loader"),Andamio.config.cordova?navigator.spinner&&navigator.spinner.show({message:t}):Andamio.dom.pageLoader.show()},hide:function(){i=!1,Andamio.dom.html.removeClass("has-loader"),Andamio.config.cordova?navigator.spinner&&navigator.spinner.hide():Andamio.dom.pageLoader.hide()},get status(){return i},init:function(){i=Andamio.dom.html.hasClass("has-loader");var t,e=this;Andamio.dom.doc.on("Andamio:views:activateView:start",function(){t=setTimeout(function(){e.show()},250)}),Andamio.dom.doc.on("Andamio:views:activateView:finish",function(){clearTimeout(t),e.hide()}),Andamio.dom.doc.on("ajaxError",function(){clearTimeout(t),e.hide()})}}}(),Andamio.dom.pageNav=$(".js-page-navigation"),Andamio.dom.pageNavItems=Andamio.dom.pageNav.find(".action-nav-item"),Object.defineProperties(Andamio.dom,{pageNavActive:{get:function(){return this.pageNavItems.filter(".active")},set:function(i){$.contains(this.pageNav[0],i[0])&&(this.pageNavActive.removeClass("active"),i.addClass("active"))}}}),Andamio.nav=function(){function i(i){Andamio.dom.viewport.height(i),Andamio.dom.pageView.height(i)}var t,e,o;return{show:function(){t=!0,Andamio.events.lock(),Andamio.dom.html.addClass("has-navigation"),Andamio.config.webapp||i(o)},hide:function(){t=!1,Andamio.events.lock(),Andamio.dom.html.removeClass("has-navigation"),Andamio.config.webapp||i("")},get status(){return t},init:function(){var i=this;t=Andamio.dom.html.hasClass("has-navigation"),e=Andamio.dom.win.height(),o=Andamio.dom.pageNav.height(),Andamio.config.os.iphone&&!Andamio.config.webapp&&(e+=60),e>o&&(o=e,Andamio.dom.pageNav.height(o)),Andamio.events.attach(".action-show-nav",i.show),Andamio.events.attach(".action-hide-nav",i.hide),Andamio.events.attach(".action-nav-item",function(t){var e=$(t.currentTarget),o=Andamio.util.getUrl(e),n=Andamio.util.getTitle(e);return Andamio.dom.pageNavActive[0]!==e[0]||Andamio.config.os.tablet?(Andamio.dom.pageNavActive=e,Andamio.config.os.tablet||i.hide(),n&&Andamio.dom.viewport.one("Andamio:views:activateView:finish",function(){Andamio.views.list.lookup("parentView").title=n}),o&&Andamio.views.openParentPage(o),void 0):(i.hide(),void 0)})}}}(),Andamio.reveal=function(){return{init:function(){Andamio.events.attach(".action-reveal",function(i){var t,e,o,n="active",a="."+n,s=$(i.currentTarget);s&&(t=s.siblings(a),t&&t.removeClass(n),s.addClass(n),o=Andamio.util.getUrl(s),o&&(e=$(o).siblings(a),e&&e.removeClass("active"),$(o).addClass(n),i.preventDefault()))})}}}(),Andamio.slideshow=function(){function i(i){if("number"==typeof i){this.wrapper=$('<div class="slideshow-dots">');for(var t=0;i>t;t++)this.wrapper.append($('<div class="slideshow-dot"></div>'));this.items=this.wrapper.find(".slideshow-dot"),Object.defineProperties(this,{active:{get:function(){return this.wrapper.find(".active")},set:function(i){this.wrapper.find(".active").removeClass("active"),$(i).addClass("active")}}}),this.active=this.items.first()}}return{init:function(t,e,o){var n=$("#"+t);if(!n.hasClass(".js-slideshow-active")){if(this.options={startSlide:0,speed:300,continuous:!0,disableScroll:!1},"object"==typeof e&&e!==void 0)for(var a in e)this.options[a]=e[a];var s=new Swipe(document.getElementById(t),this.options),d=new i(s.length);return d.wrapper.insertAfter(s.container).on("click",function(i){var t=i.target;d.items.each(function(i,e){e===t&&s.slide(i,300)})}),s.callback=function(i,t){d.active=d.items[i],$.isFunction(o)&&o(i,t)},n.find(".js-slideshow-media").each(function(i,t){var e=$(t),o=e.data("src");e.css("background-image","url("+o+")")}),n.on("click",function(i){var t=$(i.target),e=t.parents(".action-slideshow-next"),o=t.parents(".action-slideshow-prev");e.length>0&&s.next(),o.length>0&&s.prev()}),n.addClass("js-slideshow-active"),s}}}}(),Andamio.dom.pageTabs=$(".js-page-tabs"),Andamio.dom.pageTabsItems=Andamio.dom.pageTabs.find(".action-tab-item"),Object.defineProperties(Andamio.dom,{pageTabsActive:{get:function(){return this.pageTabsItems.filter(".active")},set:function(i){$.contains(this.pageTabs[0],i[0])&&(this.pageTabsActive.removeClass("active"),i.addClass("active"))}}}),Andamio.tabs=function(){var i;return{show:function(){i=!0,Andamio.dom.html.addClass("has-page-tabs"),Andamio.dom.pageTabs.show()},hide:function(){i=!1,Andamio.dom.html.removeClass("has-page-tabs"),Andamio.dom.pageTabs.hide()},get status(){return i},init:function(){i=Andamio.dom.html.hasClass("has-page-tabs"),Andamio.events.attach(".action-show-tabs",Andamio.tabs.show),Andamio.events.attach(".action-hide-tabs",Andamio.tabs.hide),Andamio.events.attach(".action-tab-item",function(i){var t=$(i.currentTarget),e=Andamio.util.getUrl(t),o=Andamio.util.getTitle(t);Andamio.dom.pageTabsActive=t,o&&Andamio.dom.viewport.one("Andamio:views:activateView:finish",function(){Andamio.views.list.values.parentView.title=o}),Andamio.views.openParentPage(e)})}}}(),Andamio.views=function(){function i(i){return i.length>0?i[i.length-1]:void 0}function t(i){return i&&i.length>1?i[i.length-2]:void 0}function e(t,e){t!==i(e)&&e.push(t)}function o(i,t,e){this.container=i,t&&Object.defineProperties(this,{title:{get:function(){return this.container.find(".js-title")},set:function(i){"string"==typeof i&&this.container.find(".js-title").text(i)}},content:{get:function(){return this.container.hasClass("js-content")?this.container:this.container.find(".js-content")}},scroller:{get:function(){return Andamio.config.webapp?this.container.hasClass("overthrow")?this.container:this.container.find(".overthrow"):Andamio.dom.win}}}),e&&(this.initialPosition=e,this.position=e,this.slide=function(i){var t=this.container,e=this.position;Andamio.events.lock(),"slide-left"===e&&"slide-default"===i&&t.addClass("slide-in-from-left").one("webkitTransitionEnd",function(){t.addClass("slide-default").removeClass("slide-left slide-right slide-in-from-left")}),"slide-right"===e&&"slide-default"===i&&t.addClass("slide-in-from-right").one("webkitTransitionEnd",function(){t.addClass("slide-default").removeClass("slide-right slide-left slide-in-from-right")}),"slide-bottom"===e&&"slide-default"===i&&t.addClass("slide-in-from-bottom").one("webkitTransitionEnd",function(){t.addClass("slide-default").removeClass("slide-bottom slide-in-from-bottom")}),"slide-top"===e&&"slide-default"===i&&t.addClass("slide-in-from-top").one("webkitTransitionEnd",function(){t.addClass("slide-default").removeClass("slide-top slide-in-from-top")}),"slide-default"===e&&"slide-left"===i&&t.addClass("slide-out-to-left").one("webkitTransitionEnd",function(){t.addClass("slide-left").removeClass("slide-default slide-out-to-left")}),"slide-default"===e&&"slide-right"===i&&t.addClass("slide-out-to-right").one("webkitTransitionEnd",function(){t.addClass("slide-right").removeClass("slide-default slide-out-to-right")}),"slide-default"===e&&"slide-bottom"===i&&t.addClass("slide-out-to-bottom").one("webkitTransitionEnd",function(){t.addClass("slide-bottom").removeClass("slide-default slide-out-to-bottom")}),"slide-default"===e&&"slide-top"===i&&t.addClass("slide-out-to-top").one("webkitTransitionEnd",function(){t.addClass("slide-top").removeClass("slide-default slide-out-to-top")}),this.position=i}),Object.defineProperties(this,{active:{get:function(){return this.container.hasClass("view-active")},set:function(i){i?this.container.addClass("view-active").removeClass("view-hidden"):this.container.addClass("view-hidden").removeClass("view-active")}}})}function n(){var n=new o(Andamio.dom.parentView,!0,"slide-default"),a=new o(Andamio.dom.childView,!0,"slide-right"),s=new o(Andamio.dom.childViewAlt,!0,"slide-right"),d=new o(Andamio.dom.modalView,!0,"slide-bottom"),r=[],c=[],l=[];this.list=new Andamio.util.Dictionary({parentView:n,childView:a,childViewAlt:s,modalView:d}),this.childCount=0,this.modalCount=0,Object.defineProperties(this,{currentUrl:{get:function(){return i(r)},set:function(i){e(i,r)}},previousUrl:{get:function(){return t(r)}},currentView:{get:function(){return i(c)},set:function(i){c.push(i)}},previousView:{get:function(){return t(c)}},scrollPosition:{get:function(){return i(l)},set:function(i){l.push(i)}}}),this.resetViews=function(){this.list.each(function(i){Andamio.views.list.values[i].reset()}),c=[],r=[],l=[],this.childCount=0},this.activateView=function(i,t,e,o){if(this.list.contains(i)){var n=this.list.lookup(i);n.active=!0,Andamio.dom.doc.trigger("Andamio:views:activateView"),t&&(Andamio.dom.doc.trigger("Andamio:views:activateView:start",[t]),n.content.empty(),Andamio.page.load(t,e,function(i){n.content.html(i),"number"==typeof o&&(n.scroller[0].scrollTop=o),Andamio.dom.doc.trigger("Andamio:views:activateView:finish",[t])}))}},this.deactivateView=function(i){this.list.contains(i)&&(this.list.lookup(i).active=!1)},this.pushView=function(i,t,e,o){this.list.contains(i)&&(this.currentView=i,t&&(this.currentUrl=t),this.previousView&&(this.scrollPosition=this.list.lookup(this.previousView).scroller[0].scrollTop),this.activateView(i,t,e,o),this.deactivateView(this.previousView))},this.popView=function(){this.previousView&&(this.deactivateView(this.currentView),1===this.childCount?this.activateView(this.previousView):this.activateView(this.previousView,this.previousUrl,!1,this.scrollPosition),c.pop(),r.pop(),l.pop())},this.refreshView=function(i){var t=this.currentUrl,e=this.list.lookup(this.currentView);t&&(e.content.empty(),Andamio.page.refresh(t,i,function(i){e.content.html(i)}))},this.openParentPage=function(i,t){this.resetViews();var e=t||Andamio.config.cacheExpiration;this.pushView("parentView",i,e,0)},this.pushModal=function(i,t){return this.modalCount>0?!1:(Andamio.config.webapp&&this.list.lookup("modalView").slide("slide-default"),this.pushView("modalView",i,t),this.modalCount++,void 0)},this.popModal=function(){return this.modalCount>0?(Andamio.config.webapp&&this.list.lookup("modalView").slide("slide-bottom"),this.popView(),this.modalCount--,void 0):!1},this.pushChild=function(i,t){this.childCount++;var e=this.list.lookup(this.currentView);switch(e){case n:this.pushView("childView",i,t,0),Andamio.config.webapp&&(n.slide("slide-left"),a.slide("slide-default"));break;case a:this.pushView("childViewAlt",i,t,0),Andamio.config.webapp&&(s.container.removeClass("slide-left").addClass("slide-right"),Andamio.util.delay(function(){a.slide("slide-left"),s.slide("slide-default")},0));break;case s:this.pushView("childView",i,t,0),Andamio.config.webapp&&(a.container.removeClass("slide-left").addClass("slide-right"),Andamio.util.delay(function(){s.slide("slide-left"),a.slide("slide-default")},0))}},this.popChild=function(){var i=this.list.lookup(this.currentView);if(Andamio.config.webapp)switch(i){case n:return;case a:1===this.childCount?(n.slide("slide-default"),a.slide("slide-right")):(s.container.removeClass("slide-right").addClass("slide-left"),Andamio.util.delay(function(){a.slide("slide-right"),s.slide("slide-default")},0));break;case s:a.container.removeClass("slide-right").addClass("slide-left"),Andamio.util.delay(function(){s.slide("slide-right"),a.slide("slide-default")},0)}this.popView(),this.childCount--},this.init=function(){"string"==typeof Andamio.config.initialView?Andamio.views.openParentPage(Andamio.config.initialView):(Andamio.views.openParentPage(),Andamio.views.currentUrl=Andamio.config.server),Andamio.events.attach(".action-push",function(i){var t=$(i.currentTarget),e=Andamio.util.getUrl(t);Andamio.views.pushChild(e)}),Andamio.events.attach(".action-show-modal",function(i){var t=$(i.currentTarget),e=Andamio.util.getUrl(t);Andamio.views.pushModal(e)}),Andamio.events.attach(".action-pop",function(){Andamio.views.popChild()}),Andamio.events.attach(".action-hide-modal",function(){Andamio.views.popModal()}),Andamio.events.attach(".action-refresh",function(){Andamio.views.refreshView()})}}return o.prototype.reset=function(){this.position&&Andamio.config.webapp&&(this.position=this.initialPosition,this.container.removeClass("slide-left slide-right slide-default slide-bottom").addClass(this.position)),this.active=!1},new n}(),Andamio.init=function(i){Andamio.config.init(i),Andamio.alert.init(),Andamio.cache.init(),Andamio.connection.init(),Andamio.loader.init(),Andamio.views.init(),Andamio.nav.init(),Andamio.tabs.init(),Andamio.reveal.init(),Andamio.config.cordova&&Andamio.phone.init()};