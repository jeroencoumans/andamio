function FastClick(e){"use strict";var t,n=this;this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.layer=e;if(!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(n,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(n,arguments)};if(typeof window.ontouchstart=="undefined")return;this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,r){var i=Node.prototype.removeEventListener;t==="click"?i.call(e,t,n.hijacked||n,r):i.call(e,t,n,r)},e.addEventListener=function(t,n,r){var i=Node.prototype.addEventListener;t==="click"?i.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),r):i.call(e,t,n,r)}),typeof e.onclick=="function"&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null)}var Zepto=function(){function A(e){return T.call(e)=="[object Function]"}function O(e){return e instanceof Object}function M(e){return O(e)&&e!=window&&e.__proto__==Object.prototype}function _(e){return e instanceof Array}function D(e){return typeof e.length=="number"}function P(e){return o.call(e,function(e){return e!=null})}function H(e){return e.length>0?n.fn.concat.apply([],e):e}function B(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function j(e){return e in f?f[e]:f[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function F(e,t){return typeof t=="number"&&!c[B(e)]?t+"px":t}function I(e){var t,n;return a[e]||(t=u.createElement(e),u.body.appendChild(t),n=l(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),n=="none"&&(n="block"),a[e]=n),a[e]}function q(e){return"children"in e?s.call(e.children):n.map(e.childNodes,function(e){if(e.nodeType==1)return e})}function R(n,r,i){for(t in r)i&&M(r[t])?(M(n[t])||(n[t]={}),R(n[t],r[t],i)):r[t]!==e&&(n[t]=r[t])}function U(t,r){return r===e?n(t):n(t).filter(r)}function z(e,t,n,r){return A(t)?t.call(e,n,r):t}function W(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function X(t,n){var r=t.className,i=r&&r.baseVal!==e;if(n===e)return i?r.baseVal:r;i?r.baseVal=n:t.className=n}function V(e){var t;try{return e?e=="true"||(e=="false"?!1:e=="null"?null:isNaN(t=Number(e))?/^[\[\{]/.test(e)?n.parseJSON(e):e:t):e}catch(r){return e}}function $(e,t){t(e);for(var n in e.childNodes)$(e.childNodes[n],t)}var e,t,n,r,i=[],s=i.slice,o=i.filter,u=window.document,a={},f={},l=u.defaultView.getComputedStyle,c={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},h=/^\s*<(\w+|!)[^>]*>/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/^(?:body|html)$/i,v=["val","css","html","text","data","width","height","offset"],m=["after","prepend","before","append"],g=u.createElement("table"),y=u.createElement("tr"),b={tr:u.createElement("tbody"),tbody:g,thead:g,tfoot:g,td:y,th:y,"*":u.createElement("div")},w=/complete|loaded|interactive/,E=/^\.([\w-]+)$/,S=/^#([\w-]*)$/,x=/^[\w-]+$/,T={}.toString,N={},C,k,L=u.createElement("div");return N.matches=function(e,t){if(!e||e.nodeType!==1)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,s=!i;return s&&(i=L).appendChild(e),r=~N.qsa(i,t).indexOf(e),s&&L.removeChild(e),r},C=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},k=function(e){return o.call(e,function(t,n){return e.indexOf(t)==n})},N.fragment=function(t,r,i){t.replace&&(t=t.replace(p,"<$1></$2>")),r===e&&(r=h.test(t)&&RegExp.$1),r in b||(r="*");var o,u,a=b[r];return a.innerHTML=""+t,u=n.each(s.call(a.childNodes),function(){a.removeChild(this)}),M(i)&&(o=n(u),n.each(i,function(e,t){v.indexOf(e)>-1?o[e](t):o.attr(e,t)})),u},N.Z=function(e,t){return e=e||[],e.__proto__=arguments.callee.prototype,e.selector=t||"",e},N.isZ=function(e){return e instanceof N.Z},N.init=function(t,r){if(!t)return N.Z();if(A(t))return n(u).ready(t);if(N.isZ(t))return t;var i;if(_(t))i=P(t);else if(O(t))i=[M(t)?n.extend({},t):t],t=null;else if(h.test(t))i=N.fragment(t.trim(),RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=N.qsa(u,t)}return N.Z(i,t)},n=function(e,t){return N.init(e,t)},n.extend=function(e){var t,n=s.call(arguments,1);return typeof e=="boolean"&&(t=e,e=n.shift()),n.forEach(function(n){R(e,n,t)}),e},N.qsa=function(e,t){var n;return e===u&&S.test(t)?(n=e.getElementById(RegExp.$1))?[n]:[]:e.nodeType!==1&&e.nodeType!==9?[]:s.call(E.test(t)?e.getElementsByClassName(RegExp.$1):x.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=function(e,t){return e!==t&&e.contains(t)},n.isFunction=A,n.isObject=O,n.isArray=_,n.isPlainObject=M,n.inArray=function(e,t,n){return i.indexOf.call(t,e,n)},n.camelCase=C,n.trim=function(e){return e.trim()},n.uuid=0,n.support={},n.expr={},n.map=function(e,t){var n,r=[],i,s;if(D(e))for(i=0;i<e.length;i++)n=t(e[i],i),n!=null&&r.push(n);else for(s in e)n=t(e[s],s),n!=null&&r.push(n);return H(r)},n.each=function(e,t){var n,r;if(D(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},n.grep=function(e,t){return o.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.fn={forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,indexOf:i.indexOf,concat:i.concat,map:function(e){return n(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return n(s.apply(this,arguments))},ready:function(e){return w.test(u.readyState)?e(n):u.addEventListener("DOMContentLoaded",function(){e(n)},!1),this},get:function(t){return t===e?s.call(this):this[t]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(e){return i.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return A(e)?this.not(this.not(e)):n(o.call(this,function(t){return N.matches(t,e)}))},add:function(e,t){return n(k(this.concat(n(e,t))))},is:function(e){return this.length>0&&N.matches(this[0],e)},not:function(t){var r=[];if(A(t)&&t.call!==e)this.each(function(e){t.call(this,e)||r.push(this)});else{var i=typeof t=="string"?this.filter(t):D(t)&&A(t.item)?s.call(t):n(t);this.forEach(function(e){i.indexOf(e)<0&&r.push(e)})}return n(r)},has:function(e){return this.filter(function(){return O(e)?n.contains(this,e):n(this).find(e).size()})},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!O(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!O(e)?e:n(e)},find:function(e){var t;return this.length==1?t=n(N.qsa(this[0],e)):t=this.map(function(){return N.qsa(this,e)}),t},closest:function(e,t){var r=this[0];while(r&&!N.matches(r,e))r=r!==t&&r!==u&&r.parentNode;return n(r)},parents:function(e){var t=[],r=this;while(r.length>0)r=n.map(r,function(e){if((e=e.parentNode)&&e!==u&&t.indexOf(e)<0)return t.push(e),e});return U(t,e)},parent:function(e){return U(k(this.pluck("parentNode")),e)},children:function(e){return U(this.map(function(){return q(this)}),e)},contents:function(){return this.map(function(){return s.call(this.childNodes)})},siblings:function(e){return U(this.map(function(e,t){return o.call(q(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return n.map(this,function(t){return t[e]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=null),l(this,"").getPropertyValue("display")=="none"&&(this.style.display=I(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=A(e);if(this[0]&&!t)var r=n(e).get(0),i=r.parentNode||this.length>1;return this.each(function(s){n(this).wrapAll(t?e.call(this,s):i?r.cloneNode(!0):r)})},wrapAll:function(e){if(this[0]){n(this[0]).before(e=n(e));var t;while((t=e.children()).length)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=A(e);return this.each(function(r){var i=n(this),s=i.contents(),o=t?e.call(this,r):e;s.length?s.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var r=n(this);(t===e?r.css("display")=="none":t)?r.show():r.hide()})},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(t){return t===e?this.length>0?this[0].innerHTML:null:this.each(function(e){var r=this.innerHTML;n(this).empty().append(z(this,t,e,r))})},text:function(t){return t===e?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t})},attr:function(n,r){var i;return typeof n=="string"&&r===e?this.length==0||this[0].nodeType!==1?e:n=="value"&&this[0].nodeName=="INPUT"?this.val():!(i=this[0].getAttribute(n))&&n in this[0]?this[0][n]:i:this.each(function(e){if(this.nodeType!==1)return;if(O(n))for(t in n)W(this,t,n[t]);else W(this,n,z(this,r,e,this.getAttribute(n)))})},removeAttr:function(e){return this.each(function(){this.nodeType===1&&W(this,e)})},prop:function(t,n){return n===e?this[0]&&this[0][t]:this.each(function(e){this[t]=z(this,n,e,this[t])})},data:function(t,n){var r=this.attr("data-"+B(t),n);return r!==null?V(r):e},val:function(t){return t===e?this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(e){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=z(this,t,e,this.value)})},offset:function(e){if(e)return this.each(function(t){var r=n(this),i=z(this,e,t,r.offset()),s=r.offsetParent().offset(),o={top:i.top-s.top,left:i.left-s.left};r.css("position")=="static"&&(o.position="relative"),r.css(o)});if(this.length==0)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:t.width,height:t.height}},css:function(e,n){if(arguments.length<2&&typeof e=="string")return this[0]&&(this[0].style[C(e)]||l(this[0],"").getPropertyValue(e));var r="";for(t in e)!e[t]&&e[t]!==0?this.each(function(){this.style.removeProperty(B(t))}):r+=B(t)+":"+F(t,e[t])+";";return typeof e=="string"&&(!n&&n!==0?this.each(function(){this.style.removeProperty(B(e))}):r=B(e)+":"+F(e,n)),this.each(function(){this.style.cssText+=";"+r})},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return i.some.call(this,function(e){return this.test(X(e))},j(e))},addClass:function(e){return this.each(function(t){r=[];var i=X(this),s=z(this,e,t,i);s.split(/\s+/g).forEach(function(e){n(this).hasClass(e)||r.push(e)},this),r.length&&X(this,i+(i?" ":"")+r.join(" "))})},removeClass:function(t){return this.each(function(n){if(t===e)return X(this,"");r=X(this),z(this,t,n,r).split(/\s+/g).forEach(function(e){r=r.replace(j(e)," ")}),X(this,r.trim())})},toggleClass:function(t,r){return this.each(function(i){var s=z(this,t,i,X(this));(r===e?!n(this).hasClass(s):r)?n(this).addClass(s):n(this).removeClass(s)})},scrollTop:function(){if(!this.length)return;return"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY},position:function(){if(!this.length)return;var e=this[0],t=this.offsetParent(),r=this.offset(),i=d.test(t[0].nodeName)?{top:0,left:0}:t.offset();return r.top-=parseFloat(n(e).css("margin-top"))||0,r.left-=parseFloat(n(e).css("margin-left"))||0,i.top+=parseFloat(n(t[0]).css("border-top-width"))||0,i.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:r.top-i.top,left:r.left-i.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u.body;while(e&&!d.test(e.nodeName)&&n(e).css("position")=="static")e=e.offsetParent;return e})}},n.fn.detach=n.fn.remove,["width","height"].forEach(function(t){n.fn[t]=function(r){var i,s=t.replace(/./,function(e){return e[0].toUpperCase()});return r===e?this[0]==window?window["inner"+s]:this[0]==u?u.documentElement["offset"+s]:(i=this.offset())&&i[t]:this.each(function(e){var i=n(this);i.css(t,z(this,r,e,i[t]()))})}}),m.forEach(function(e,t){var r=t%2;n.fn[e]=function(){var e=n.map(arguments,function(e){return O(e)?e:N.fragment(e)}),i,s=this.length>1;return e.length<1?this:this.each(function(o,u){i=r?u:u.parentNode,u=t==0?u.nextSibling:t==1?u.firstChild:t==2?u:null,e.forEach(function(e){if(s)e=e.cloneNode(!0);else if(!i)return n(e).remove();$(i.insertBefore(e,u),function(e){e.nodeName!=null&&e.nodeName.toUpperCase()==="SCRIPT"&&(!e.type||e.type==="text/javascript")&&!e.src&&window.eval.call(window,e.innerHTML)})})})},n.fn[r?e+"To":"insert"+(t?"Before":"After")]=function(t){return n(t)[e](this),this}}),N.Z.prototype=n.fn,N.uniq=k,N.deserializeValue=V,n.zepto=N,n}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function($){function triggerAndReturn(e,t,n){var r=$.Event(t);return $(e).trigger(r,n),!r.defaultPrevented}function triggerGlobal(e,t,n,r){if(e.global)return triggerAndReturn(t||document,n,r)}function ajaxStart(e){e.global&&$.active++===0&&triggerGlobal(e,null,"ajaxStart")}function ajaxStop(e){e.global&&!--$.active&&triggerGlobal(e,null,"ajaxStop")}function ajaxBeforeSend(e,t){var n=t.context;if(t.beforeSend.call(n,e,t)===!1||triggerGlobal(t,n,"ajaxBeforeSend",[e,t])===!1)return!1;triggerGlobal(t,n,"ajaxSend",[e,t])}function ajaxSuccess(e,t,n){var r=n.context,i="success";n.success.call(r,e,i,t),triggerGlobal(n,r,"ajaxSuccess",[t,n,e]),ajaxComplete(i,t,n)}function ajaxError(e,t,n,r){var i=r.context;r.error.call(i,n,t,e),triggerGlobal(r,i,"ajaxError",[n,r,e]),ajaxComplete(t,n,r)}function ajaxComplete(e,t,n){var r=n.context;n.complete.call(r,t,e),triggerGlobal(n,r,"ajaxComplete",[t,n]),ajaxStop(n)}function empty(){}function mimeToDataType(e){return e&&(e==htmlType?"html":e==jsonType?"json":scriptTypeRE.test(e)?"script":xmlTypeRE.test(e)&&"xml")||"text"}function appendQuery(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function serializeData(e){e.processData&&isObject(e.data)&&(e.data=$.param(e.data,e.traditional)),e.data&&(!e.type||e.type.toUpperCase()=="GET")&&(e.url=appendQuery(e.url,e.data))}function serialize(e,t,n,r){var i=$.isArray(t);$.each(t,function(t,s){r&&(t=n?r:r+"["+(i?"":t)+"]"),!r&&i?e.add(s.name,s.value):(n?$.isArray(s):isObject(s))?serialize(e,s,n,t):e.add(t,s)})}var jsonpID=0,isObject=$.isObject,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;$.active=0,$.ajaxJSONP=function(e){if("type"in e){var t="jsonp"+ ++jsonpID,n=document.createElement("script"),r=function(){$(n).remove(),t in window&&(window[t]=empty),ajaxComplete("abort",i,e)},i={abort:r},s;return e.error&&(n.onerror=function(){i.abort(),e.error()}),window[t]=function(r){clearTimeout(s),$(n).remove(),delete window[t],ajaxSuccess(r,i,e)},serializeData(e),n.src=e.url.replace(/=\?/,"="+t),$("head").append(n),e.timeout>0&&(s=setTimeout(function(){i.abort(),ajaxComplete("timeout",i,e)},e.timeout)),i}return $.ajax(e)},$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0},$.ajax=function(options){var settings=$.extend({},options||{});for(key in $.ajaxSettings)settings[key]===undefined&&(settings[key]=$.ajaxSettings[key]);ajaxStart(settings),settings.crossDomain||(settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host);var dataType=settings.dataType,hasPlaceholder=/=\?/.test(settings.url);if(dataType=="jsonp"||hasPlaceholder)return hasPlaceholder||(settings.url=appendQuery(settings.url,"callback=?")),$.ajaxJSONP(settings);settings.url||(settings.url=window.location.toString()),serializeData(settings);var mime=settings.accepts[dataType],baseHeaders={},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=$.ajaxSettings.xhr(),abortTimeout;settings.crossDomain||(baseHeaders["X-Requested-With"]="XMLHttpRequest"),mime&&(baseHeaders.Accept=mime,mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime));if(settings.contentType||settings.contentType!==!1&&settings.data&&settings.type.toUpperCase()!="GET")baseHeaders["Content-Type"]=settings.contentType||"application/x-www-form-urlencoded";settings.headers=$.extend(baseHeaders,settings.headers||{}),xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty,clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||xhr.status==304||xhr.status==0&&protocol=="file:"){dataType=dataType||mimeToDataType(xhr.getResponseHeader("content-type")),result=xhr.responseText;try{dataType=="script"?(1,eval)(result):dataType=="xml"?result=xhr.responseXML:dataType=="json"&&(result=blankRE.test(result)?null:$.parseJSON(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings):ajaxSuccess(result,xhr,settings)}else ajaxError(null,xhr.status?"error":"abort",xhr,settings)}};var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async);for(name in settings.headers)xhr.setRequestHeader(name,settings.headers[name]);return ajaxBeforeSend(xhr,settings)===!1?(xhr.abort(),!1):(settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr)},$.get=function(e,t){return $.ajax({url:e,success:t})},$.post=function(e,t,n,r){return $.isFunction(t)&&(r=r||n,n=t,t=null),$.ajax({type:"POST",url:e,data:t,success:n,dataType:r})},$.getJSON=function(e,t){return $.ajax({url:e,success:t,dataType:"json"})},$.fn.load=function(e,t){if(!this.length)return this;var n=this,r=e.split(/\s/),i;return r.length>1&&(e=r[0],i=r[1]),$.get(e,function(e){n.html(i?$("<div>").html(e.replace(rscript,"")).find(i):e),t&&t.apply(n,arguments)}),this};var escape=encodeURIComponent;$.param=function(e,t){var n=[];return n.add=function(e,t){this.push(escape(e)+"="+escape(t))},serialize(n,e,t),n.join("&").replace(/%20/g,"+")}}(Zepto),function(e){function o(e){return e._zid||(e._zid=r++)}function u(e,t,r,i){t=a(t);if(t.ns)var s=f(t.ns);return(n[o(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||s.test(e.ns))&&(!r||o(e.fn)===o(r))&&(!i||e.sel==i)})}function a(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function f(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function l(t,n,r){e.isObject(t)?e.each(t,r):t.split(/\s/).forEach(function(e){r(e,n)})}function c(e,t){return e.del&&(e.e=="focus"||e.e=="blur")||!!t}function h(e){return s[e]||e}function p(t,r,i,u,f,p){var d=o(t),v=n[d]||(n[d]=[]);l(r,i,function(n,r){var i=a(n);i.fn=r,i.sel=u,i.e in s&&(r=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return i.fn.apply(this,arguments)}),i.del=f&&f(r,n);var o=i.del||r;i.proxy=function(e){var n=o.apply(t,[e].concat(e.data));return n===!1&&(e.preventDefault(),e.stopPropagation()),n},i.i=v.length,v.push(i),t.addEventListener(h(i.e),i.proxy,c(i,p))})}function d(e,t,r,i,s){var a=o(e);l(t||"",r,function(t,r){u(e,t,r,i).forEach(function(t){delete n[a][t.i],e.removeEventListener(h(t.e),t.proxy,c(t,s))})})}function b(t){var n,r={originalEvent:t};for(n in t)!g.test(n)&&t[n]!==undefined&&(r[n]=t[n]);return e.each(y,function(e,n){r[e]=function(){return this[n]=v,t[e].apply(t,arguments)},r[n]=m}),r}function w(e){if(!("defaultPrevented"in e)){e.defaultPrevented=!1;var t=e.preventDefault;e.preventDefault=function(){this.defaultPrevented=!0,t.call(this)}}}var t=e.zepto.qsa,n={},r=1,i={},s={mouseenter:"mouseover",mouseleave:"mouseout"};i.click=i.mousedown=i.mouseup=i.mousemove="MouseEvents",e.event={add:p,remove:d},e.proxy=function(t,n){if(e.isFunction(t)){var r=function(){return t.apply(n,arguments)};return r._zid=o(t),r}if(typeof n=="string")return e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t){return this.each(function(){p(this,e,t)})},e.fn.unbind=function(e,t){return this.each(function(){d(this,e,t)})},e.fn.one=function(e,t){return this.each(function(n,r){p(this,e,t,null,function(e,t){return function(){var n=e.apply(r,arguments);return d(r,t,e),n}})})};var v=function(){return!0},m=function(){return!1},g=/^([A-Z]|layer[XY]$)/,y={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,n,r){return this.each(function(i,s){p(s,n,r,t,function(n){return function(r){var i,o=e(r.target).closest(t,s).get(0);if(o)return i=e.extend(b(r),{currentTarget:o,liveFired:s}),n.apply(o,[i].concat([].slice.call(arguments,1)))}})})},e.fn.undelegate=function(e,t,n){return this.each(function(){d(this,t,n,e)})},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,r){return!n||e.isFunction(n)?this.bind(t,n||r):this.delegate(n,t,r)},e.fn.off=function(t,n,r){return!n||e.isFunction(n)?this.unbind(t,n||r):this.undelegate(n,t,r)},e.fn.trigger=function(t,n){if(typeof t=="string"||e.isPlainObject(t))t=e.Event(t);return w(t),t.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(t)})},e.fn.triggerHandler=function(t,n){var r,i;return this.each(function(s,o){r=b(typeof t=="string"?e.Event(t):t),r.data=n,r.target=o,e.each(u(o,t.type||t),function(e,t){i=t.proxy(r);if(r.isImmediatePropagationStopped())return!1})}),i},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),e.Event=function(e,t){typeof e!="string"&&(t=e,e=t.type);var n=document.createEvent(i[e]||"Events"),r=!0;if(t)for(var s in t)s=="bubbles"?r=!!t[s]:n[s]=t[s];return n.initEvent(e,r,!0,null,null,null,null,null,null,null,null,null,null,null,null),n.isDefaultPrevented=function(){return this.defaultPrevented},n}}(Zepto),function(e){var t=function(e,t,n){return e+(t-e)*n},n=function(e){return-Math.cos(e*Math.PI)/2+.5};e.scroll=function(t,n,r){var i=document.body;e.scrollElement(i,t,n,r)},e.scrollElement=function(r,i,s,o){i=i||(e.os.android?1:0),s=s||400,typeof o=="function"&&(n=o);var u=r.scrollTop,a=Date.now(),f=a+s,l=function(){var e=+(new Date),o=e>f?1:(e-a)/s;r.scrollTop=t(u,i,n(o)),e>f||setTimeout(l,15)};l()}}(Zepto),window.Swipe=function(e,t){var n=this;if(!e)return;this.container=e,this.element=this.container.children[0],this.browser={touch:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}(),transitions:function(){var e=document.createElement("swipe"),t=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var n in t)if(e.style[t[n]]!==undefined)return!0;return!1}()},t=t||{},this.index=t.startSlide||0,this.speed=t.speed||300,this.callback=t.callback||function(){},this.transitionEnd=t.transitionEnd||function(){},this.delay=t.auto||0,this.cont=t.continuous!=undefined?!!t.continuous:!0,this.disableScroll=!!t.disableScroll,this.index=parseInt(this.index,10),this.setup(),this.begin(),this.element.addEventListener?(!this.browser.touch||(this.element.addEventListener("touchstart",this,!1),this.element.addEventListener("touchmove",this,!1),this.element.addEventListener("touchend",this,!1)),!this.browser.transitions||(this.element.addEventListener("webkitTransitionEnd",this,!1),this.element.addEventListener("msTransitionEnd",this,!1),this.element.addEventListener("oTransitionEnd",this,!1),this.element.addEventListener("transitionend",this,!1)),window.addEventListener("resize",this,!1)):window.onresize=function(){n.setup()}},Swipe.prototype={setup:function(){this.slides=this.element.children,this.length=this.slides.length,this.cache=new Array(this.length);if(this.length<2)return;this.width=this.container.getBoundingClientRect().width||this.container.offsetWidth;if(!this.width)return;var e=[[],[],[]];this.element.style.width=this.slides.length*this.width+"px";for(var t=this.length-1;t>-1;t--){var n=this.slides[t];n.style.width=this.width+"px",n.setAttribute("data-index",t),this.browser.transitions&&(n.style.left=t*-this.width+"px"),e[this.index>t?0:this.index<t?2:1].push(t)}this.browser.transitions?(this._stack(e[0],-1),this._stack(e[1],0),this._stack(e[2],1)):this.element.style.left=this.index*-this.width+"px",this.container.style.visibility="visible"},kill:function(){this.delay=0,clearTimeout(this.interval);var e=[];for(var t=this.slides.length-1;t>=0;t--)this.slides[t].style.width="",e.push(t);this._stack(e,0);var n=this.element;n.className=n.className.replace("swipe-active",""),this.element.removeEventListener?(!this.browser.touch||(this.element.removeEventListener("touchstart",this,!1),this.element.removeEventListener("touchmove",this,!1),this.element.removeEventListener("touchend",this,!1)),!this.browser.transitions||(this.element.removeEventListener("webkitTransitionEnd",this,!1),this.element.removeEventListener("msTransitionEnd",this,!1),this.element.removeEventListener("oTransitionEnd",this,!1),this.element.removeEventListener("transitionend",this,!1)),window.removeEventListener("resize",this,!1)):window.onresize=null},getPos:function(){return this.index},prev:function(e){this.delay=e||0,clearTimeout(this.interval),this.index?this.slide(this.index-1,this.speed):this.cont&&this.slide(this.length-1,this.speed)},next:function(e){this.delay=e||0,clearTimeout(this.interval),this.index<this.length-1?this.slide(this.index+1,this.speed):this.cont&&this.slide(0,this.speed)},begin:function(){var e=this;this.interval=this.delay?setTimeout(function(){e.next(e.delay)},this.delay):0},handleEvent:function(e){switch(e.type){case"touchstart":this.onTouchStart(e);break;case"touchmove":this.onTouchMove(e);break;case"touchend":this.onTouchEnd(e);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":this.onTransitionEnd(e);break;case"resize":this.setup()}e.stopPropagation()},onTouchStart:function(e){var t=this;t.start={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,time:Number(new Date)},t.isScrolling=undefined,t.deltaX=0},onTouchMove:function(e){var t=this;if(e.touches.length>1||e.scale&&e.scale!==1)return;t.deltaX=e.touches[0].pageX-t.start.pageX,typeof t.isScrolling=="undefined"&&(t.isScrolling=!!(t.isScrolling||Math.abs(t.deltaX)<Math.abs(e.touches[0].pageY-t.start.pageY))),t.isScrolling?t.disableScroll&&e.preventDefault():(e.preventDefault(),t.delay=0,clearTimeout(t.interval),t.deltaX=t.deltaX/(!t.index&&t.deltaX>0||t.index==t.length-1&&t.deltaX<0?Math.abs(t.deltaX)/t.width+1:1),t._move([t.index-1,t.index,t.index+1],t.deltaX))},onTouchEnd:function(e){var t=this,n=Number(new Date)-t.start.time<250&&Math.abs(t.deltaX)>20||Math.abs(t.deltaX)>t.width/2,r=!t.index&&t.deltaX>0||t.index==t.length-1&&t.deltaX<0,i=t.deltaX<0;t.isScrolling||(n&&!r?(i?(t._stack([t.index-1],-1),t._slide([t.index,t.index+1],-t.width,t.speed),t.index+=1):(t._stack([t.index+1],1),t._slide([t.index-1,t.index],t.width,t.speed),t.index+=-1),t.callback(t.index,t.slides[t.index])):t._slide([t.index-1,t.index,t.index+1],0,t.speed))},onTransitionEnd:function(e){this._getElemIndex(e.target)==this.index&&(this.delay&&this.begin(),this.transitionEnd(this.index,this.slides[this.index]))},slide:function(e,t){var n=this.index;if(n==e)return;var t=typeof t=="undefined"?this.speed:t;if(this.browser.transitions){var r=Math.abs(n-e)-1,i=Math.abs(n-e)/(n-e),s=[];while(r--)s.push((e>n?e:n)-r-1);this._stack(s,i),this._slide([n,e],this.width*i,t)}else this._animate(n*-this.width,e*-this.width,t);this.index=e,this.callback(this.index,this.slides[this.index])},_slide:function(e,t,n){var r=this.slides,i=e.length;while(i--)this._translate(r[e[i]],t+this.cache[e[i]],n?n:0),this.cache[e[i]]+=t},_stack:function(e,t){var n=this.slides,r=e.length,i=this.width*t;while(r--)this._translate(n[e[r]],i,0),this.cache[e[r]]=i},_move:function(e,t){var n=this.slides,r=e.length;while(r--)this._translate(n[e[r]],t+this.cache[e[r]],0)},_translate:function(e,t,n){if(!e)return;var r=e.style;r.webkitTransitionDuration=r.MozTransitionDuration=r.msTransitionDuration=r.OTransitionDuration=r.transitionDuration=n+"ms",r.webkitTransform="translate("+t+"px,0)"+"translateZ(0)",r.msTransform=r.MozTransform=r.OTransform="translateX("+t+"px)"},_animate:function(e,t,n){var r=this.element;if(!n){r.style.left=t+"px";return}var i=this,s=new Date,o=setInterval(function(){var u=new Date-s;if(u>n){r.style.left=t+"px",i.delay&&i.begin(),i.transitionEnd(i.index,i.slides[i.index]),clearInterval(o);return}r.style.left=(t-e)*(Math.floor(u/n*100)/100)+e+"px"},4)},_getElemIndex:function(e){return parseInt(e.getAttribute("data-index"),10)}},(window.jQuery||window.Zepto)&&function(e){e.fn.Swipe=function(t){return this.each(function(){var n=e(this);n.data("Swipe",new Swipe(n[0],t))})}}(window.jQuery||window.Zepto),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"button":case"input":if(this.deviceIsIOS&&e.type==="file")return!0;return e.disabled;case"label":case"video":return!0;default:return/\bneedsclick\b/.test(e.className)}},FastClick.prototype.needsFocus=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){"use strict";var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},FastClick.prototype.focus=function(e){"use strict";var t;this.deviceIsIOS&&e.setSelectionRange?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){"use strict";var t,n;t=e.fastClickScrollParent;if(!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){"use strict";return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){"use strict";var t,n,r;t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0];if(this.deviceIsIOS){r=window.getSelection();if(r.rangeCount&&!r.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){"use strict";var t=e.changedTouches[0];return Math.abs(t.pageX-this.touchStartX)>10||Math.abs(t.pageY-this.touchStartY)>10?!0:!1},FastClick.prototype.findControl=function(e){"use strict";return e.control!==undefined?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){"use strict";var t,n,r,i,s,o=this.targetElement;this.touchHasMoved(e)&&(this.trackingClick=!1,this.targetElement=null);if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(s=e.changedTouches[0],o=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)),r=o.tagName.toLowerCase();if(r==="label"){t=this.findControl(o);if(t){this.focus(o);if(this.deviceIsAndroid)return!1;o=t}}else if(this.needsFocus(o)){if(e.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&r==="input")return this.targetElement=null,!1;this.focus(o);if(!this.deviceIsIOS4||r!=="select")this.targetElement=null,e.preventDefault();return!1}if(this.deviceIsIOS&&!this.deviceIsIOS4){i=o.fastClickScrollParent;if(i&&i.fastClickLastScrollTop!==i.scrollTop)return!0}if(!this.needsClick(o)){e.preventDefault();var u=this;setTimeout(function(){u.sendClick(o,e)},0)}return!1},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){"use strict";return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(e){"use strict";var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):e.target.type==="submit"&&e.detail===0?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){"use strict";var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},typeof define!="undefined"&&define.amd&&define(function(){"use strict";return FastClick}),typeof module!="undefined"&&module.exports&&(module.exports=function(e){"use strict";return new FastClick(e)},module.exports.FastClick=FastClick);var lscache=function(){function a(){var e="__lscachetest__",t=e;if(s!==undefined)return s;try{p(e,t),d(e),s=!0}catch(n){s=!1}return s}function f(){return o===undefined&&(o=window.JSON!=null),o}function l(e){return e+t}function c(){return Math.floor((new Date).getTime()/r)}function h(t){return localStorage.getItem(e+u+t)}function p(t,n){localStorage.removeItem(e+u+t),localStorage.setItem(e+u+t,n)}function d(t){localStorage.removeItem(e+u+t)}var e="lscache-",t="-cacheexpiration",n=10,r=6e4,i=Math.floor(864e13/r),s,o,u="";return{set:function(r,s,o){if(!a())return;if(typeof s!="string"){if(!f())return;try{s=JSON.stringify(s)}catch(v){return}}try{p(r,s)}catch(v){if(v.name!=="QUOTA_EXCEEDED_ERR"&&v.name!=="NS_ERROR_DOM_QUOTA_REACHED")return;var m=[],g;for(var y=0;y<localStorage.length;y++){g=localStorage.key(y);if(g.indexOf(e+u)===0&&g.indexOf(t)<0){var b=g.substr((e+u).length),w=l(b),E=h(w);E?E=parseInt(E,n):E=i,m.push({key:b,size:(h(b)||"").length,expiration:E})}}m.sort(function(e,t){return t.expiration-e.expiration});var S=(s||"").length;while(m.length&&S>0)g=m.pop(),d(g.key),d(l(g.key)),S-=g.size;try{p(r,s)}catch(v){return}}o?p(l(r),(c()+o).toString(n)):d(l(r))},get:function(e){if(!a())return null;var t=l(e),r=h(t);if(r){var i=parseInt(r,n);if(c()>=i)return d(e),d(t),null}var s=h(e);if(!s||!f())return s;try{return JSON.parse(s)}catch(o){return s}},remove:function(e){if(!a())return null;d(e),d(l(e))},supported:function(){return a()},flush:function(){if(!a())return;for(var t=localStorage.length-1;t>=0;--t){var n=localStorage.key(t);n.indexOf(e+u)===0&&localStorage.removeItem(n)}},setBucket:function(e){u=e},resetBucket:function(){u=""}}}();window.Andamio={},Andamio.dom=function(){"use strict";return{win:$(window),doc:$(window.document),html:$("html"),viewport:$(".viewport"),pageView:$(".js-page-view"),parentView:$(".js-parent-view"),childView:$(".js-child-view"),modalView:$(".js-modal-view")}}(),Andamio.config=function(){"use strict";var e=function(e){var t=this.os={},n=this.browser={},r=e.match(/WebKit\/([\d.]+)/),i=e.match(/(Android)\s+([\d.]+)/),s=e.match(/(iPad).*OS\s([\d_]+)/),o=!s&&e.match(/(iPhone\sOS)\s([\d_]+)/),u=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),a=u&&e.match(/TouchPad/),f=e.match(/Kindle\/([\d.]+)/),l=e.match(/Silk\/([\d._]+)/),c=e.match(/(BlackBerry).*Version\/([\d.]+)/),h=e.match(/(BB10).*Version\/([\d.]+)/),p=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),d=e.match(/PlayBook/),v=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),m=e.match(/Firefox\/([\d.]+)/);if(n.webkit=!!r)n.version=r[1];i&&(t.android=!0,t.version=i[2]),o&&(t.ios=t.iphone=!0,t.version=o[2].replace(/_/g,".")),s&&(t.ios=t.ipad=!0,t.version=s[2].replace(/_/g,".")),u&&(t.webos=!0,t.version=u[2]),a&&(t.touchpad=!0),c&&(t.blackberry=!0,t.version=c[2]),h&&(t.bb10=!0,t.version=h[2]),p&&(t.rimtabletos=!0,t.version=p[2]),d&&(n.playbook=!0),f&&(t.kindle=!0,t.version=f[1]),l&&(n.silk=!0,n.version=l[1]),!l&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0),v&&(n.chrome=!0,n.version=v[1]),m&&(n.firefox=!0,n.version=m[1]),t.tablet=!!(s||d||i&&!e.match(/Mobile/)||m&&e.match(/Tablet/)),t.phone=!t.tablet&&!!(i||o||u||c||h||v&&e.match(/Android/)||v&&e.match(/CriOS\/([\d.]+)/)||m&&e.match(/Mobile/))};return{get webapp(){return Andamio.dom.html.hasClass("webapp")},set webapp(e){e?Andamio.dom.html.removeClass("website").addClass("webapp"):Andamio.dom.html.removeClass("webapp").addClass("website")},init:function(t){e.call(this,navigator.userAgent),this.os.ios&&(this.os.ios5=this.os.version.indexOf("5.")!==-1,this.os.ios6=this.os.version.indexOf("6.")!==-1),this.os.android&&(this.os.android2=this.os.version>="2"&&this.os.version<"4",this.os.android4=this.os.version>="4"&&this.os.version<"5");var n=window;this.webapp=n.location.search.search("webapp")>0||n.navigator.standalone,this.cordova=n.navigator.userAgent.indexOf("TMGContainer")>-1,this.server=n.location.origin+n.location.pathname,this.touch="ontouchstart"in n,this.os.tablet=Andamio.dom.doc.width()>=980;if(typeof t=="object")for(var r in t){if(r==="init")return;this[r]=t[r]}this.touch?this.fastclick=new FastClick(n.document.body):Andamio.dom.html.addClass("no-touch"),this.cordova&&(this.webapp=!0),this.os.tablet&&Andamio.dom.html.addClass("desktop has-navigation"),this.os.ios&&Andamio.dom.html.addClass("ios"),this.os.ios5&&Andamio.dom.html.addClass("ios5"),this.os.ios6&&Andamio.dom.html.addClass("ios6"),this.os.android&&Andamio.dom.html.addClass("android"),this.os.android2&&Andamio.dom.html.addClass("android2"),this.os.android4&&Andamio.dom.html.addClass("android")}}}(),Andamio.events=function(){"use strict";return{attach:function(e,t,n){Andamio.dom.viewport.on("click",e,function(e){t(e);if(n!==!0)return!1})}}}(),Andamio.util=function(){function e(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function t(e){this.values=e||{}}return t.prototype.store=function(e,t){this.values[e]=t},t.prototype.lookup=function(e){return this.values[e]},t.prototype.contains=function(e){return Object.prototype.hasOwnProperty.call(this.values,e)&&Object.prototype.propertyIsEnumerable.call(this.values,e)},t.prototype.each=function(t){e(this.values,t)},{Dictionary:t,getUrl:function(e){var t=$(e).data("url"),n=$(e).attr("href"),r=$(e).hash;if(t)return t;if(n.substring(0,10)!=="javascript")return n;if(r)return r},getUrlList:function(e){if(!e)return;var t=[];return $(e).each(function(e,n){var r=Andamio.util.getUrl(n);r&&t.push(r)}),t},getTitle:function(e){var t=$(e).data("title"),n=$(e).text();return t?t:n}}}(),Andamio.util.delay=function(){var e=0;return function(t,n){clearTimeout(e),e=setTimeout(t,n)}}(),Andamio.phone=function(){"use strict";return{init:function(){Andamio.config.phone={updateTimestamp:new Date,updateTimeout:18e5},navigator.bootstrap.addConstructor(function(){cordova.exec(null,null,"SplashScreen","hide",[]),Andamio.events.attach('a[target="_blank"]',function(e){var t=$(e.currentTarget),n=t.attr("href");return navigator.utility.openUrl(n,"popover"),!1}),Andamio.dom.doc.on("statusbartap",function(){var e=Andamio.views.list.lookup(Andamio.views.currentView),t=Andamio.nav.status?Andamio.dom.pageNav:e.scroller;t.scrollTo(0,400)}),Andamio.dom.doc.on("resign",function(){Andamio.config.phone.updateTimestamp=new Date}),Andamio.dom.doc.on("active",function(){var e=new Date;e-Andamio.config.updateTimestamp>Andamio.config.updateTimeout&&(Andamio.alert.status&&Andamio.alert.hide(),Andamio.views.refreshView())})})}}}(),Andamio.cache=function(){"use strict";var e;return{getCache:function(t){if(!t)return;var n=e.get(t);if(n)return n},setCache:function(t,n,r){if(!t||!n)return;var i=typeof r=="number"?r:120;e.set(t,n,i)},deleteCache:function(t){if(!t)return;e.remove(t)},init:function(){window.lscache&&(Andamio.config.cache=window.lscache.supported(),e=window.lscache)}}}(),Andamio.connection=function(){"use strict";var e;return{goOnline:function(){Andamio.dom.html.removeClass("is-offline"),Andamio.alert.status=!1},goOffline:function(){Andamio.dom.html.addClass("is-offline"),Andamio.alert.show(e)},get status(){return!Andamio.dom.html.hasClass("is-offline")},set status(e){e?Andamio.connection.goOnline():Andamio.connection.goOffline()},init:function(){var t=this;t.status=!Andamio.dom.html.hasClass("is-offline"),e=Andamio.config.offlineMessage||'<a href="javascript:void(0)" class="action-refresh">It appears your connection isn\'t working. Try again.</a>',Andamio.dom.doc.on("ajaxSuccess",t.goOnline),Andamio.dom.doc.on("ajaxError",t.goOffline)}}}(),Andamio.page=function(){function e(e,t,n){Andamio.config.cache&&Andamio.cache.setCache(e,t,n)}function t(t,n,r){var i=t+(/\?/.test(t)?"&":"?")+(new Date).getTime();$.ajax({url:i,timeout:1e4,headers:{"X-PJAX":!0,"X-Requested-With":"XMLHttpRequest"},success:function(r){e(t,r,n)},complete:function(e){$.isFunction(r)&&r(e.responseText)}})}return{load:function(e,n,r){if(!e)return!1;var i=Andamio.cache.getCache(e);i?$.isFunction(r)&&r(i):t(e,n,function(e){$.isFunction(r)&&r(e)})},refresh:function(e,t,n){Andamio.cache.deleteCache(e),this.load(e,t,n)}}}(),Andamio.pager=function(){function u(t){e=!0,r=Andamio.views.list.lookup(Andamio.views.currentView),i=r.scroller,s=i.height(),o=i[0].scrollHeight||Andamio.dom.viewport.height(),Andamio.config.pager.loadMoreAction.insertAfter(Andamio.dom.pagerWrapper),Andamio.config.pager.spinner.insertAfter(Andamio.dom.pagerWrapper).hide(),Andamio.config.pager.autoFetch&&(t.autoFetching=!0),Andamio.config.pager.loadMoreAction.on("click",function(){t.loadNextPage()})}function a(t){e=!1,Andamio.config.pager.autoFetch&&(t.autoFetching=!1),Andamio.config.pager.loadMoreAction.off("click",function(){t.loadNextPage()}),Andamio.config.pager.loadMoreAction.remove(),Andamio.config.pager.spinner.remove()}function f(){Andamio.config.pager.spinner.show(),Andamio.config.pager.loadMoreAction.hide()}function l(){Andamio.config.pager.spinner.hide(),Andamio.config.pager.loadMoreAction.show()}function c(n){this.params=$.isPlainObject(n)?n:{},Andamio.dom.pagerWrapper=this.params.elem||Andamio.views.list.lookup(Andamio.views.currentView).content.find(".js-pager-list"),Andamio.config.pager={autoFetch:this.params.autoFetch||!1,autoFetchMax:this.params.autoFetchMax||3,autoFetchThreshold:this.params.autoFetchThreshold||100,callback:$.isFunction(this.params.callback)?this.params.callback:function(){},expires:this.params.expires||null,loadMoreAction:this.params.loadMoreAction||$('<div class="pager-action"><a href="javascript:void(0)" class="button button-block action-load-more">Load more</a></div>'),spinner:this.params.spinner||$('<div class="pager-loading">Loading...</div></div>'),url:this.params.url||Andamio.config.server+"?page="},this.pageNumber=this.params.pageNumber||0,Object.defineProperties(this,{autoFetching:{get:function(){return t},set:function(e){t=e;var n=this;e?i.on("scroll",function(){n.onScroll()}):i.off("scroll")}},status:{get:function(){return e},set:function(e){var t=this;e?u(t):a(t)}}}),Andamio.dom.pagerWrapper.length>0&&(this.status=!0)}var e,t,n,r,i,s,o;return c.prototype.loadNextPage=function(e){if(!n){n=!0,f(),this.pageNumber++;var t=this;Andamio.page.load(Andamio.config.pager.url+t.pageNumber,Andamio.config.pager.expires,function(r){n=!1,r?(Andamio.dom.pagerWrapper.append(r),l(),s=i.height(),o=i[0].scrollHeight||Andamio.dom.viewport.height(),$.isFunction(e)&&e(t.pageNumber),Andamio.config.pager.callback(t.pageNumber)):t.status=!1})}},c.prototype.onScroll=function(){if(!n){var e=i.scrollTop(),t=this;Andamio.util.delay(function(){e+s+Andamio.config.pager.autoFetchThreshold>=o&&t.loadNextPage(function(){i.scrollTop(e),t.pageNumber>=Andamio.config.pager.autoFetchMax&&(t.autoFetching=!1)})},300)}},{init:function(e){return new c(e)}}}(),Andamio.dom.pageAlert=$(".js-page-alert"),Object.defineProperties(Andamio.dom,{pageAlertText:{get:function(){return this.pageAlert.find(".js-page-alert-text").text()},set:function(e){this.pageAlert.find(".js-page-alert-text").html(e)}}}),Andamio.alert=function(){"use strict";return{show:function(e){e&&(Andamio.dom.pageAlertText=e),Andamio.dom.html.addClass("has-alert"),Andamio.dom.pageAlert.show()},hide:function(){Andamio.dom.html.removeClass("has-alert"),Andamio.dom.pageAlert.hide()},get status(){return Andamio.dom.html.hasClass("has-alert")},set status(e){e?this.show():this.hide()},init:function(){this.status=Andamio.dom.html.hasClass("has-alert"),Andamio.events.attach(".action-hide-alert",this.hide)}}}(),Andamio.dom.pageLoader=$(".js-page-loader"),Andamio.dom.pageLoaderImg=Andamio.dom.pageLoader.find(".js-page-loader-spinner"),Object.defineProperties(Andamio.dom,{pageLoaderText:{get:function(){return this.pageLoader.find(".js-page-loader-text").text()},set:function(e){this.pageLoader.find(".js-page-loader-text").html(e)}}}),Andamio.loader=function(){"use strict";return{show:function(e){e&&(Andamio.dom.pageLoaderText=e),Andamio.dom.html.addClass("has-loader"),Andamio.config.cordova?navigator.spinner&&navigator.spinner.show({message:e}):Andamio.dom.pageLoader.show()},hide:function(){Andamio.dom.html.removeClass("has-loader"),Andamio.config.cordova?navigator.spinner&&navigator.spinner.hide():Andamio.dom.pageLoader.hide()},get status(){return Andamio.dom.html.hasClass("has-loader")},set status(e){e?this.show():this.hide()},init:function(){this.status=Andamio.dom.html.hasClass("has-loader");var e;Andamio.dom.doc.on("Andamio:views:activateView:start",function(){e=window.setTimeout(function(){Andamio.loader.show()},250)}),Andamio.dom.doc.on("Andamio:views:activateView:finish",function(){window.clearTimeout(e),Andamio.loader.hide()})}}}(),Andamio.dom.pageNav=$(".js-page-navigation"),Andamio.dom.pageNavItems=Andamio.dom.pageNav.find(".action-nav-item"),Object.defineProperties(Andamio.dom,{pageNavActive:{get:function(){return this.pageNavItems.filter(".active")},set:function(e){var t=this.pageNavActive;t.removeClass("active"),e.addClass("active")}}}),Andamio.nav=function(){"use strict";function n(e){Andamio.dom.viewport.height(e),Andamio.dom.pageView.height(e)}var e,t;return{show:function(){Andamio.dom.html.addClass("has-navigation"),Andamio.config.webapp||n(t)},hide:function(){Andamio.dom.html.removeClass("has-navigation"),Andamio.config.webapp||n("")},get status(){return Andamio.dom.html.hasClass("has-navigation")},set status(e){e?this.show():this.hide()},init:function(){var n=this;n.status=Andamio.dom.html.hasClass("has-navigation"),e=Andamio.dom.win.height(),t=Andamio.dom.pageNav.height(),Andamio.config.os.iphone&&!Andamio.config.webapp&&(e+=60),e>t&&(t=e,Andamio.dom.pageNav.height(t)),Andamio.events.attach(".action-show-nav",n.show),Andamio.events.attach(".action-hide-nav",n.hide),Andamio.events.attach(".action-nav-item",function(e){var t=$(e.currentTarget),r=Andamio.util.getUrl(t),i=Andamio.util.getTitle(t);Andamio.dom.pageNavActive=t,Andamio.config.os.tablet||n.hide(),i&&Andamio.dom.viewport.one("Andamio:views:activateView:finish",function(){Andamio.views.list.lookup("parentView").title=i}),r&&Andamio.views.openParentPage(r)})}}}(),Andamio.reveal=function(){"use strict";return{init:function(){Andamio.events.attach(".action-reveal",function(e){var t,n,r,i="active",s="."+i,o=$(e.currentTarget);if(!o)return;t=o.siblings(s),t&&t.removeClass(i),o.addClass(i),r=Andamio.util.getUrl(o);if(!r)return;n=$(r).siblings(s),n&&n.removeClass("active"),$(r).addClass(i),e.preventDefault()})}}}(),Andamio.slideshow=function(){function e(e){if(typeof e=="number"){this.wrapper=$('<div class="slideshow-dots">');for(var t=0;t<e;t++)this.wrapper.append($('<div class="slideshow-dot"></div>'));this.items=this.wrapper.find(".slideshow-dot"),Object.defineProperties(this,{active:{get:function(){return this.wrapper.find(".active")},set:function(e){this.wrapper.find(".active").removeClass("active"),$(e).addClass("active")}}}),this.active=this.items.first()}}return{init:function(t,n,r){var i=$(t).data("js-slideshow-active");this.options={startSlide:0,speed:300,continuous:!0,disableScroll:!1};if(typeof n=="object"&&typeof n!="undefined")for(var s in n)this.options[s]=n[s];if(!i){var o=new Swipe(document.getElementById(t),this.options),u=new e(o.length);return u.wrapper.insertAfter(o.container),$(o.container).next().on("click",function(e){var t=e.target;u.items.each(function(e,n){n===t&&o.slide(e,300)})}),o.callback=function(e,t){u.active=u.items[e];var n=$(t).find(".js-slideshow-media");n&&n.css("background-image","url("+n.data("src")+")"),$.isFunction(r)&&r(e,t)},$(o.container).on("click",function(e){var t=$(e.target),n=t.parents(".action-slideshow-next"),r=t.parents(".action-slideshow-prev");n.length>0&&o.next(),r.length>0&&o.prev()}),o}}}}(),Andamio.dom.pageTabs=$(".js-page-tabs"),Andamio.dom.pageTabsItems=Andamio.dom.pageTabs.find(".action-tab-item"),Object.defineProperties(Andamio.dom,{pageTabsActive:{get:function(){return this.pageTabsItems.filter(".active")},set:function(e){var t=this.pageTabsActive;t.removeClass("active"),e.addClass("active")}}}),Andamio.tabs=function(){"use strict";return{show:function(){Andamio.dom.html.addClass("has-page-tabs"),Andamio.dom.pageTabs.show()},hide:function(){Andamio.dom.html.removeClass("has-page-tabs"),Andamio.dom.pageTabs.hide()},get status(){return Andamio.dom.html.hasClass("has-page-tabs")},set status(e){e?this.show():this.hide()},init:function(){var e=this;e.status=Andamio.dom.html.hasClass("has-page-tabs"),Andamio.events.attach(".action-tab-item",function(e){var t=$(e.currentTarget),n=Andamio.util.getUrl(t),r=Andamio.util.getTitle(t);Andamio.dom.pageTabsActive=t,r&&Andamio.dom.viewport.one("Andamio:views:activateView:finish",function(){var e=Andamio.views.list.lookup(Andamio.views.currentView);e.title=r}),n&&(Andamio.views.activateView(Andamio.views.currentView,n,null,0),Andamio.views.currentUrl=n)}),Andamio.events.attach(".action-show-tabs",Andamio.tabs.show),Andamio.events.attach(".action-hide-tabs",Andamio.tabs.hide)}}}(),Andamio.views=function(){function e(e){if(e.length>0)return e[e.length-1]}function t(e){if(e&&e.length>1)return e[e.length-2]}function n(t,n){t!==e(n)&&n.push(t)}function r(e,t,n){this.container=e,t&&Object.defineProperties(this,{title:{get:function(){return this.container.find(".js-title")},set:function(e){typeof e=="string"&&this.container.find(".js-title").text(e)}},content:{get:function(){return this.container.hasClass("js-content")?this.container:this.container.find(".js-content")}},scroller:{get:function(){return Andamio.config.webapp?this.container.hasClass("overthrow")?this.container:this.container.find(".overthrow"):Andamio.dom.win}}}),n&&(this.initialPosition=n,this.position=n,this.slide=function(e){var t=this.container,n=this.position;n==="slide-left"&&e==="slide-default"&&t.addClass("slide-in-from-left").one("webkitTransitionEnd",function(){t.addClass("slide-default").removeClass("slide-left slide-right slide-in-from-left")}),n==="slide-right"&&e==="slide-default"&&t.addClass("slide-in-from-right").one("webkitTransitionEnd",function(){t.addClass("slide-default").removeClass("slide-right slide-left slide-in-from-right")}),n==="slide-bottom"&&e==="slide-default"&&t.addClass("slide-in-from-bottom").one("webkitTransitionEnd",function(){t.addClass("slide-default").removeClass("slide-bottom slide-in-from-bottom")}),n==="slide-top"&&e==="slide-default"&&t.addClass("slide-in-from-top").one("webkitTransitionEnd",function(){t.addClass("slide-default").removeClass("slide-top slide-in-from-top")}),n==="slide-default"&&e==="slide-left"&&t.addClass("slide-out-to-left").one("webkitTransitionEnd",function(){t.addClass("slide-left").removeClass("slide-default slide-out-to-left")}),n==="slide-default"&&e==="slide-right"&&t.addClass("slide-out-to-right").one("webkitTransitionEnd",function(){t.addClass("slide-right").removeClass("slide-default slide-out-to-right")}),n==="slide-default"&&e==="slide-bottom"&&t.addClass("slide-out-to-bottom").one("webkitTransitionEnd",function(){t.addClass("slide-bottom").removeClass("slide-default slide-out-to-bottom")}),n==="slide-default"&&e==="slide-top"&&t.addClass("slide-out-to-top").one("webkitTransitionEnd",function(){t.addClass("slide-top").removeClass("slide-default slide-out-to-top")}),this.position=e}),Object.defineProperties(this,{active:{get:function(){return this.container.hasClass("view-active")},set:function(e){e?this.container.addClass("view-active").removeClass("view-hidden"):this.container.addClass("view-hidden").removeClass("view-active")}}})}function i(){this.list=new Andamio.util.Dictionary({parentView:new r(Andamio.dom.parentView,!0,"slide-default"),childView:new r(Andamio.dom.childView,!0,"slide-right"),modalView:new r(Andamio.dom.modalView,!0,"slide-bottom")});var i=[],s=[],o=[];this._urlHistory=function(){return i},this._viewHistory=function(){return s},this._scrollHistory=function(){return o},this.childCount=0,this.modalCount=0;var u=!0;Object.defineProperties(this,{currentUrl:{get:function(){return e(i)},set:function(e){n(e,i)}},previousUrl:{get:function(){return t(i)}},currentView:{get:function(){return e(s)},set:function(e){s.push(e)}},previousView:{get:function(){return t(s)}},scrollPosition:{get:function(){return e(o)},set:function(e){o.push(e)}}}),this.resetViews=function(){this.list.each(function(e){var t=Andamio.views.list.lookup(e);t.reset()}),s=[],i=[],o=[],u=!0},this.activateView=function(e,t,n,r){if(this.list.contains(e)){var i=this.list.lookup(e);i.active=!0,t&&(Andamio.dom.doc.trigger("Andamio:views:activateView:start",[t]),i.content.empty(),Andamio.page.load(t,n,function(e){i.content.html(e),typeof r=="number"&&(i.scroller[0].scrollTop=r),Andamio.dom.doc.trigger("Andamio:views:activateView:finish",[t])}))}},this.deactivateView=function(e){if(this.list.contains(e)){var t=this.list.lookup(e);t.active=!1}},this.pushView=function(e,t,n,r){this.list.contains(e)&&(this.currentView=e,t&&(this.currentUrl=t),this.previousView&&(this.scrollPosition=this.list.lookup(this.previousView).scroller[0].scrollTop),this.activateView(e,t,n,r),this.deactivateView(this.previousView))},this.popView=function(){this.previousView&&(this.deactivateView(this.currentView),u?this.activateView(this.previousView):this.activateView(this.previousView,this.previousUrl,!1,this.scrollPosition),s.pop(),i.pop(),o.pop(),this.childCount===0&&(u=!0))},this.refreshView=function(e){var t=this.currentUrl,n=this.list.lookup(this.currentView);t&&(n.content.empty(),Andamio.page.refresh(t,e,function(e){n.content.html(e)}))},this.openParentPage=function(e,t){this.resetViews();var n=t||1440;this.pushView("parentView",e,n)},this.pushModal=function(e,t){if(this.modalCount>0)return!1;Andamio.config.webapp&&this.list.lookup("modalView").slide("slide-default"),this.pushView("modalView",e,t),this.modalCount++},this.popModal=function(){if(!(this.modalCount>0))return!1;Andamio.config.webapp&&this.list.lookup("modalView").slide("slide-bottom"),this.popView(),this.modalCount--},this.pushChild=function(e,t){this.childCount++,this.childCount>1&&(u=!1);var n=this.list.lookup("parentView"),r=this.list.lookup("childView");this.childCount%2>0?(Andamio.config.webapp&&(Andamio.dom.childView.removeClass("slide-left").addClass("slide-right"),Andamio.util.delay(function(){n.slide("slide-left"),r.slide("slide-default")},0)),this.pushView("childView",e,t,0)):(Andamio.config.webapp&&(Andamio.dom.parentView.removeClass("slide-left").addClass("slide-right"),Andamio.util.delay(function(){n.slide("slide-default"),r.slide("slide-left")},0)),this.pushView("parentView",e,t,0))},this.popChild=function(){var e=this.list.lookup("parentView"),t=this.list.lookup("childView");this.childCount%2>0?Andamio.config.webapp&&(Andamio.dom.parentView.removeClass("slide-right").addClass("slide-left"),Andamio.util.delay(function(){e.slide("slide-default"),t.slide("slide-right")},0)):Andamio.config.webapp&&(Andamio.dom.childView.removeClass("slide-right").addClass("slide-left"),Andamio.util.delay(function(){t.slide("slide-default"),e.slide("slide-right")},0)),this.popView(),this.childCount--},this.init=function(){typeof Andamio.config.initialView=="string"?Andamio.views.openParentPage(Andamio.config.initialView):(Andamio.views.currentView="parentView",Andamio.views.currentUrl=Andamio.config.server),Andamio.events.attach(".action-push",function(e){var t=$(e.currentTarget),n=Andamio.util.getUrl(t);Andamio.views.pushChild(n)}),Andamio.events.attach(".action-show-modal",function(e){var t=$(e.currentTarget),n=Andamio.util.getUrl(t);Andamio.views.pushModal(n)}),Andamio.events.attach(".action-pop",function(){Andamio.views.popChild()}),Andamio.config.os.android&&navigator.bootstrap.addConstructor(function(){Andamio.dom.doc.addEventListener("backbutton",function(){Andamio.views.popChild()})}),Andamio.events.attach(".action-hide-modal",function(){Andamio.views.popModal()}),Andamio.events.attach(".action-refresh",function(){Andamio.views.refreshView()})}}return r.prototype.reset=function(){this.position&&Andamio.config.webapp&&(this.position=this.initialPosition,this.container.removeClass("slide-left").removeClass("slide-right").removeClass("slide-default").removeClass("slide-bottom").addClass(this.position)),this.active=!1},new i}(),Andamio.init=function(e){Andamio.config.init(e),Andamio.alert.init(),Andamio.cache.init(),Andamio.connection.init(),Andamio.loader.init(),Andamio.views.init(),Andamio.nav.init(),Andamio.tabs.init(),Andamio.reveal.init(),Andamio.config.cordova&&Andamio.phone.init()};